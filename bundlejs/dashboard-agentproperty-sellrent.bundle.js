"use strict";function TabPages(){this.Extend=function(t,e,a){var i=t.dataset.activeTabNumber;this.SelectedTabNumber=+i||-1,this.NavElement=t,this.Tabs=e,this.TabContains=a,this.Process()},this.Process=function(){for(var t=this,e=0;e<this.Tabs.length;e++)this.Tabs[e].addEventListener("click",function(e){e.currentTarget.dataset.tabUrl&&history.replaceState(null,null,e.currentTarget.dataset.tabUrl),t.SelectedTabNumber=+e.currentTarget.dataset.tab||-1,t.NavElement.dataset.activeTabNumber=t.SelectedTabNumber,Site.BeLazyRevalidate()})},this.Init=function(t){var e=document.querySelector(t),a=e.querySelectorAll("[data-tab]"),i=e.querySelectorAll("[data-tab-content]");this.Extend(e,a,i)}}function FileUpload(){this.InputElement=null,this.PreviewBoxElement=null,this.CurentImageBox=null,this.Form=null,this.MaxFile=null,this.StoredFiles=[],this.CurentFiles=[],this.Extend=function(t,e,a,i,n,o,r){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";this.InputElement=a,this.PreviewBoxElement=n,this.CurentImageBox=i,this.Form=o,this.UniqueControlName=u,this.MaxFile=r||2,this.InputChangeCallBack=s,this.InputElement.addEventListener("change",this.InputChange),this.InputElement.fileUpload=this,this.FileReader=new FileReader,this.IsCreateInputName=l,this.HostCdn=t||"",this.CurentFiles=e||[],this.Process()},this.Process=function(){if(this.CurentImageBox){var t=this;this.CurentFiles.forEach(function(e){var a=document.createElement("div");a.className="col-3 gutter-10 _p-item";var i=document.createElement("figure");i.className="_max-height-200 relative hover-children-show";var n=document.createElement("button");n.className="absolute hide tablet-show -border width-100 height-100 _fill-silver-opacity text-strong",n.innerText="CLICK ĐỂ XÓA",n.type="button",n.dataset.file=e,n.addEventListener("click",function(e){t.RemoveCurentFile(e,t.InputElement)});var o=e.substring(e.lastIndexOf("/")+1),r="<img class='width-100' src='"+t.HostCdn+e+"' alt='"+o+"' data-file='"+o+"' /><figcaption class='padding-5 text-center _text-ellipsis'>"+o+"</figcaption>";if(t.IsCreateInputName){var s="<input type='text' class='_hidden' name='CurentFilePaths"+t.UniqueControlName+"[]' value="+e+"></input>";r+=s}i.innerHTML=r,i.insertBefore(n,i.childNodes[0]),a.appendChild(i),t.CurentImageBox.appendChild(a)})}},this.InputChange=function(t){var e=t.target.fileUpload,a=t.target.files,i=Array.prototype.slice.call(a);e.PreviewBoxElement.innerHTML="",e.StoredFiles=[],i.forEach(function(t){if(t.type.match("image.*")&&(e.StoredFiles.push(t),e.PreviewBoxElement===e.CurentImageBox&&(e.CurentFiles=[],e.CurentImageBox.innerHTML=""),e.StoredFiles.length+e.CurentFiles.length<=e.MaxFile)){var a=new FileReader;a.onload=function(a){var i=document.createElement("div");i.className="col-3 gutter-10 _p-item";var n=document.createElement("figure");n.className="_max-height-200 relative hover-children-show";var o=document.createElement("button");o.className="absolute hide -border width-100 height-100 _fill-silver-opacity text-strong",o.type="button",o.innerText="CLICK ĐỂ XÓA",o.dataset.file=t.name,o.addEventListener("click",function(t){e.RemoveFile(t,e.InputElement)});var r="<img class='width-100' src='"+a.target.result+"' alt='"+t.name+"' data-file='"+t.name+"' /><figcaption class='padding-5 text-center _text-ellipsis'>("+t.size%1e3+" kb) "+t.name+"</figcaption>";if(e.IsCreateInputName){var s="<input type='text' class='_hidden' name='NewFiles"+e.UniqueControlName+"[]' value="+t.name+"></input>";r+=s}n.innerHTML=r,n.insertBefore(o,n.childNodes[0]),i.appendChild(n),e.PreviewBoxElement.appendChild(i)},a.readAsDataURL(t)}}),e.InputChangeCallBack&&e.InputChangeCallBack(e.StoredFiles)},this.RemoveCurentFile=function(t){for(var e=t.target.dataset.file,a=0;a<this.CurentFiles.length;a++)if(this.CurentFiles[a]===e){this.CurentFiles.splice(a,1);break}var i=Site.FindParent(t.target,"_p-item");i.remove()},this.RemoveFile=function(t,e){for(var a=t.target.dataset.file,i=0;i<this.StoredFiles.length;i++)if(this.StoredFiles[i].name===a){this.StoredFiles.splice(i,1);break}var n=Site.FindParent(t.target,"_p-item");n.remove(),Site.ClearInputFile(e)},this.Init=function(t,e,a,i,n,o,r,s,l,u){var g=document.querySelector(a),c=document.querySelector(n),d=document.querySelector(i),h=document.querySelector(o);null!=g&&null!=c||console.warn(a+" or "+c+": NULL"),this.Extend(t,e,g,d,c,h,r,s,l,u)}}function init(){tabNav=new TabPages,tabNav.Init("[data-active-tab-number]")}function bindingPatialView(){Site.MomentTime()}function initPtaAgentEditProperty(t){Site.BindingAjaxForm(t),notes=document.querySelector(t+" #editorNotes"),modelNotes=document.querySelector(t+" #Notes"),LoadEditor();var e=quill.container.firstChild.innerHTML;modelNotes.value=e;for(var a=document.querySelectorAll("[data-delete-img]"),i=0;i<a.length;i++)a[i].addEventListener("click",function(t){var e=Site.FindParent(t.target,"_imgItem");e.remove()})}function LoadEditor(){quill=new Quill(notes,{debug:"error",modules:{toolbar:toolbarOptions},placeholder:"Nhập nội dung html website...",theme:"snow"}),quill.on("editor-change",function(t){var e=quill.container.firstChild.innerHTML;modelNotes.value=e})}!function(t){function e(t,e){for(var a=window,i=(t||"").split(".");a&&i.length;)a=a[i.shift()];return"function"==typeof a?a:(e.push(t),Function.constructor.apply(null,e))}function a(t){return"GET"===t||"POST"===t}function i(t,e){a(e)||t.setRequestHeader("X-HTTP-Method-Override",e)}function n(e,a,i){var n;a&&void 0!==a.isUpdateLayout&&!a.isUpdateLayout||i.indexOf("application/x-javascript")===-1&&(n=(e.getAttribute("data-ajax-mode")||"").toUpperCase(),t(e.getAttribute("data-ajax-update")).each(function(e,i){var o;switch(n){case"BEFORE":o=i.firstChild,t("<div />").html(a).contents().each(function(){i.insertBefore(this,o)});break;case"AFTER":t("<div />").html(a).contents().each(function(){i.appendChild(this)});break;case"REPLACE-WITH":t(i).replaceWith(a);break;default:t(i).html(a)}}))}function o(o,r){var s,l,u,g;s=o.getAttribute("data-ajax-confirm"),s&&!window.confirm(s)||(l=t(o.getAttribute("data-ajax-loading")),g=parseInt(o.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(r,{type:o.getAttribute("data-ajax-method")||void 0,url:o.getAttribute("data-ajax-url")||void 0,cache:!!o.getAttribute("data-ajax-cache"),beforeSend:function(t){var a;return i(t,u),a=e(o.getAttribute("data-ajax-begin"),["xhr"]).apply(o,arguments),a!==!1&&l.show(g),a},complete:function(){l.hide(g),e(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(o,arguments),console.log("complete")},success:function(t,a,i){n(o,t,i.getResponseHeader("Content-Type")||"text/html"),e(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(o,arguments),console.log("success")},error:function(){e(o.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(o,arguments),console.log("error")}}),r.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),u=r.type.toUpperCase(),a(u)||(r.type="POST",r.data.push({name:"X-HTTP-Method-Override",value:u})),t.ajax(r))}function r(e){var a=t(e).data(u);return!a||!a.validate||a.validate()}var s="unobtrusiveAjaxClick",l="unobtrusiveAjaxClickTarget",u="unobtrusiveValidation";t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),o(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(e){var a=e.target.name,i=t(e.target),n=t(i.parents("form")[0]),o=i.offset();n.data(s,[{name:a+".x",value:Math.round(e.pageX-o.left)},{name:a+".y",value:Math.round(e.pageY-o.top)}]),setTimeout(function(){n.removeData(s)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(e){var a=e.currentTarget.name,i=t(e.target),n=t(i.parents("form")[0]);n.data(s,a?[{name:a,value:e.currentTarget.value}]:[]),n.data(l,i),setTimeout(function(){n.removeData(s),n.removeData(l)},0)}),t(document).on("submit","form[data-ajax=true]",function(e){var a=t(this).data(s)||[],i=t(this).data(l),n=i&&i.hasClass("cancel");e.preventDefault(),(n||r(this))&&o(this,{url:this.action,type:this.method||"GET",data:a.concat(t(this).serializeArray())})})}(jQuery);var Pagination={code:"",Extend:function(t){t=t||{},Pagination.size=t.size?parseInt(t.size):0,Pagination.page=t.page?parseInt(t.page):0,Pagination.step=t.step?parseInt(t.step):0,Pagination.tagName=t.tagName||"a",Pagination.attribute=t.attribute||"",Pagination.hrefToken=t.hrefToken||"",Pagination.showValue=!!t.showValue||!1,Pagination.submitFromAttributes=null!=t.form?'form="'+t.form+'" type=submit name="PageNumber"':"",Pagination.hover=t.hover||"",Pagination.itemClassName="",t.hover&&(Pagination.itemClassName+=" class='hover-tooltip' ")},Add:function(t,e){for(var a=t;a<e;a++){var i=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",a)+'"':"",n=Pagination.showValue?'value="'+a+'"':"",o=Pagination.hover?"<span class='tooltip top'>"+Pagination.hover.replace("{PAGE}",a)+"</span>":"";Pagination.code+="<li"+Pagination.itemClassName+"><"+Pagination.tagName+" "+Pagination.submitFromAttributes+" "+i+" "+n+" "+Pagination.attribute+"data-value="+a+" >"+a+"</"+Pagination.tagName+">"+o+"</li>"}},Last:function(){var t=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",Pagination.size>1?Pagination.size:1)+'"':"",e=Pagination.showValue?'value="'+(Pagination.size>1?Pagination.size:1)+'"':"",a=Pagination.hover?"<span class='tooltip top'>"+Pagination.hover.replace("{PAGE}",Pagination.size>1?Pagination.size:1)+"</span>":"";Pagination.code+="<i>...</i><li data-last "+Pagination.itemClassName+" ><"+Pagination.tagName+" "+Pagination.submitFromAttributes+" "+t+" "+e+" "+Pagination.attribute+"data-value="+Pagination.size+">"+Pagination.size+"</"+Pagination.tagName+">"+a+"</li>"},First:function(){var t=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",1)+'"':"",e=Pagination.showValue?'value="1"':"",a=Pagination.hover?"<span class='tooltip top'>"+Pagination.hover.replace("{PAGE}",1)+"</span>":"";Pagination.code+="<li data-first "+Pagination.itemClassName+"><"+Pagination.tagName+" "+Pagination.submitFromAttributes+" "+t+" "+e+" "+Pagination.attribute+" data-value=1>1</"+Pagination.tagName+">"+a+"</li><i>...</i>"},Click:function(){Pagination.page=+this.innerHTML,Pagination.Start()},Prev:function(){Pagination.page--,Pagination.page<1&&(Pagination.page=1),Pagination.Start()},Next:function(){Pagination.page++,Pagination.page>Pagination.size&&(Pagination.page=Pagination.size),Pagination.Start()},Bind:function(){for(var t=Pagination.e.getElementsByTagName(Pagination.tagName),e=0;e<t.length;e++)+t[e].innerHTML===Pagination.page&&(t[e].parentElement.className="current"),Pagination.submitFromAttributes||t[e].addEventListener("click",Pagination.Click,!1)},Finish:function(){Pagination.e.innerHTML=Pagination.code,Pagination.code="",Pagination.Bind()},Start:function(){Pagination.size<2*Pagination.step+6?Pagination.Add(1,Pagination.size+1):Pagination.page<2*Pagination.step+1?(Pagination.Add(1,2*Pagination.step+4),Pagination.Last()):Pagination.page>Pagination.size-2*Pagination.step?(Pagination.First(),Pagination.Add(Pagination.size-2*Pagination.step-2,Pagination.size+1)):(Pagination.First(),Pagination.Add(Pagination.page-Pagination.step,Pagination.page+Pagination.step+1),Pagination.Last()),Pagination.Finish()},Buttons:function(t){var e=t.getElementsByTagName(Pagination.tagName);e[0].addEventListener("click",Pagination.Prev,!1),e[1].addEventListener("click",Pagination.Next,!1)},Create:function(t){var e=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",Pagination.page>1?Pagination.page-1:1)+'"':"",a=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",Pagination.size>Pagination.page?Pagination.page+1:Pagination.size)+'"':"",i=Pagination.showValue?'value="'+(Pagination.page>1?Pagination.page-1:1)+'"':"",n=Pagination.showValue?'value="'+(Pagination.page>1?Pagination.page-1:1)+'"':"",o=["<li"+Pagination.itemClassName+"><"+Pagination.tagName+' class="pre" '+Pagination.submitFromAttributes+" "+i+" "+Pagination.attribute+" "+e+" data-value="+(Pagination.page>1?Pagination.page:1)+" >&#9668;</"+Pagination.tagName+"></li>","<span></span>","<li"+Pagination.itemClassName+"><"+Pagination.tagName+' class="next" '+Pagination.submitFromAttributes+" "+n+" "+Pagination.attribute+" "+a+" data-value="+(Pagination.size>Pagination.page?Pagination.page+1:Pagination.size)+" >&#9658;</"+Pagination.tagName+"></li>"];t.innerHTML=o.join(""),Pagination.e=t.getElementsByTagName("span")[0],Pagination.Buttons(t)},Init:function(t,e){Pagination.Extend(e),Pagination.Create(t),Pagination.Start()},Run:function(){for(var t=document.getElementsByClassName("_p-gination"),e=0;e<t.length;e++){var a=t[e];Pagination.Init(a,a.dataset)}}};document.addEventListener("DOMContentLoaded",Pagination.Run(),!1);var tabNav;document.addEventListener("DOMContentLoaded",function(){init(),Site.BindingSelectAutoSubmit(),bindingPatialView()});var quill,modelNotes,notes,listChkShowHideEditControls,toolbarOptions=[[{font:["","serif","monospace"]}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],["clean"],[{align:[]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}]];document.addEventListener("DOMContentLoaded",function(){listChkShowHideEditControls=document.querySelectorAll('[name="ShowEditControl"]');for(var t=0;t<listChkShowHideEditControls.length;t++){var e=listChkShowHideEditControls[t];e.addEventListener("change",function(t){var e=document.querySelectorAll('[name="ShowEditControl"]'),a=Site.FindParent(t.target,"_property-item");t.target.checked?a.classList.add("active"):a.classList.remove("active");for(var i=0;i<e.length;i++)if(e[i]!==t.target){var n=Site.FindParent(e[i],"_property-item");n.classList.remove("active"),e[i].checked=!1;var o=n.querySelector(".fa.fa-chevron-down");o&&(o.className="fa fa-chevron-up")}})}});