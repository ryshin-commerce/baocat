"use strict";function TabPages(){this.Extend=function(t,e,a){var n=t.dataset.activeTabNumber;this.SelectedTabNumber=+n||-1,this.NavElement=t,this.Tabs=e,this.TabContains=a,this.Process()},this.Process=function(){for(var t=this,e=0;e<this.Tabs.length;e++)this.Tabs[e].addEventListener("click",function(e){t.SelectedTabNumber=+e.currentTarget.dataset.tab||-1,t.NavElement.dataset.activeTabNumber=t.SelectedTabNumber,Site.BeLazyRevalidate()})},this.Init=function(t){var e=document.querySelector(t),a=e.querySelectorAll("[data-tab]"),n=e.querySelectorAll("[data-tab-content]");this.Extend(e,a,n)}}function initCheckboxUserPlaces(){for(var t=document.querySelectorAll("[data-notify-chk]"),e=0;e<t.length;e++){var a=t[e];a.addEventListener("change",function(t){var e=t.target,a={productPlaceId:+e.dataset.id,notifyType:+e.dataset.type,isEnable:e.checked};AjaxRequest.SendRequestGetJson("POST","/dashboard/userinfo/userPlaceChangeNotify",a,function(t,e){200===+e?Site.Notify("THÔNG BÁO","Thay đổi thành công",!0,"info",null,!0):(Site.Notify("THÔNG BÁO","Thay đổi thất bại",!0,"error",null,!0),window.location.reload())})})}}function init(){tabNav=new TabPages,tabNav.Init("[data-active-tab-number]")}!function(t){function e(t,e){for(var a=window,n=(t||"").split(".");a&&n.length;)a=a[n.shift()];return"function"==typeof a?a:(e.push(t),Function.constructor.apply(null,e))}function a(t){return"GET"===t||"POST"===t}function n(t,e){a(e)||t.setRequestHeader("X-HTTP-Method-Override",e)}function i(e,a,n){var i;a&&void 0!==a.isUpdateLayout&&!a.isUpdateLayout||n.indexOf("application/x-javascript")===-1&&(i=(e.getAttribute("data-ajax-mode")||"").toUpperCase(),t(e.getAttribute("data-ajax-update")).each(function(e,n){var r;switch(i){case"BEFORE":r=n.firstChild,t("<div />").html(a).contents().each(function(){n.insertBefore(this,r)});break;case"AFTER":t("<div />").html(a).contents().each(function(){n.appendChild(this)});break;case"REPLACE-WITH":t(n).replaceWith(a);break;default:t(n).html(a)}}))}function r(r,o){var u,c,s,d;u=r.getAttribute("data-ajax-confirm"),u&&!window.confirm(u)||(c=t(r.getAttribute("data-ajax-loading")),d=parseInt(r.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(o,{type:r.getAttribute("data-ajax-method")||void 0,url:r.getAttribute("data-ajax-url")||void 0,cache:!!r.getAttribute("data-ajax-cache"),beforeSend:function(t){var a;return n(t,s),a=e(r.getAttribute("data-ajax-begin"),["xhr"]).apply(r,arguments),a!==!1&&c.show(d),a},complete:function(){c.hide(d),e(r.getAttribute("data-ajax-complete"),["xhr","status"]).apply(r,arguments),console.log("complete")},success:function(t,a,n){i(r,t,n.getResponseHeader("Content-Type")||"text/html"),e(r.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(r,arguments),console.log("success")},error:function(){e(r.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(r,arguments),console.log("error")}}),o.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),s=o.type.toUpperCase(),a(s)||(o.type="POST",o.data.push({name:"X-HTTP-Method-Override",value:s})),t.ajax(o))}function o(e){var a=t(e).data(s);return!a||!a.validate||a.validate()}var u="unobtrusiveAjaxClick",c="unobtrusiveAjaxClickTarget",s="unobtrusiveValidation";t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),r(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(e){var a=e.target.name,n=t(e.target),i=t(n.parents("form")[0]),r=n.offset();i.data(u,[{name:a+".x",value:Math.round(e.pageX-r.left)},{name:a+".y",value:Math.round(e.pageY-r.top)}]),setTimeout(function(){i.removeData(u)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(e){var a=e.currentTarget.name,n=t(e.target),i=t(n.parents("form")[0]);i.data(u,a?[{name:a,value:e.currentTarget.value}]:[]),i.data(c,n),setTimeout(function(){i.removeData(u),i.removeData(c)},0)}),t(document).on("submit","form[data-ajax=true]",function(e){var a=t(this).data(u)||[],n=t(this).data(c),i=n&&n.hasClass("cancel");e.preventDefault(),(i||o(this))&&r(this,{url:this.action,type:this.method||"GET",data:a.concat(t(this).serializeArray())})})}(jQuery);var tabNav;document.addEventListener("DOMContentLoaded",function(){init(),initCheckboxUserPlaces()});