"use strict";function ReBindingView(){Site.ReValidateForm(document.querySelectorAll("[data-form-submit-lead]")),LoadCleave(),LoadSwiperAgent(),AddEventDropdownList()}function AddEventDropdownList(){var e=document.querySelector("[name='LeadDataModel.RoomMin']"),t=document.querySelector("[name='LeadDataModel.RoomMax']");UpdateEventCuple(e,t);var a=document.querySelector("[name='LeadDataModel.RoadMin']"),n=document.querySelector("[name='LeadDataModel.RoadMax']");UpdateEventCuple(a,n);var r=document.querySelector("[name='LeadDataModel.SizeMin']"),o=document.querySelector("[name='LeadDataModel.SizeMax']");UpdateEventCuple(r,o);var d=document.querySelector("[name='LeadDataModel.PriceMin']"),i=document.querySelector("[name='LeadDataModel.PriceMax']");UpdateEventCuple(d,i)}function UpdateEventCuple(e,t){e&&t&&e.addEventListener("change",function(e){for(var a=+e.target.value,n=t.querySelectorAll("option"),r=0;r<n.length;r++)+n[r].value<a?n[r].setAttribute("disabled",""):n[r].removeAttribute("disabled");a>t.value&&(t.selectedIndex=0)})}function LoadSwiperAgent(){var e=document.querySelector("._p-SliderAgentContactForm .swiper-container");e&&(swiperAgent=new Swiper(e,{paginationType:"fraction",effect:"flip",initialSlide:+e.dataset.activeSlide,grabCursor:!0,loop:!0,navigation:{nextEl:".fa-angle-left",prevEl:".fa-angle-right"},pagination:{el:"._p-paging"}}),swiperAgent.on("slideChange",function(){var e=swiperAgent.slides[swiperAgent.activeIndex],t=document.querySelector("[name='LeadDataModel.ReceiAgentId']");t.value=e.dataset.agentId;var a=e.dataset.agentImage,n=document.querySelector("[data-agent-thank-image]");n&&n.setAttribute("src",a);var r=e.dataset.agentName,o=document.querySelector("[data-agent-thank-name]");o&&(o.innerText=r),UpdateBtn()}),UpdateBtn())}function UpdateBtn(){var e=swiperAgent.slides[swiperAgent.activeIndex],t=document.querySelector("._p-SliderAgentContactForm [data-btn]");+e.dataset.curentLead>+e.dataset.maxLead?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")}function LoadCleave(){for(var e=document.querySelectorAll("[name='LeadDataModel.PhoneNumber']"),t=0;t<e.length;t++){new Cleave(e[t],{numericOnly:!0,delimiters:[" ",".",".","."],prefix:"+84",blocks:[3,3,3,5]})}}function InitAgentTableRow(){var e=document.querySelectorAll("[data-agent-container] [data-target-model]");frmLoadContact=document.getElementById("formShowContactLazy"),txtUserId=frmLoadContact.querySelector("[name=UserId]"),btnSubmitModel=frmLoadContact.querySelector("[type=submit]");for(var t=0;t<e.length;t++){var a=e[t];a.addEventListener("click",function(e){txtUserId.value=e.target.dataset.userId,btnSubmitModel.click()})}}function innitSearchAgentPage(){frmSearchAgentByPlace=document.getElementById("frmSearchAgentByPlace"),txtSearch=document.getElementById("txtSearch"),placeId=document.getElementById("placeId")}function elasticSearchBinding(){fuzzyComplete=new BcFuzzySearch,fuzzyComplete.Init("#txtSearch",+frmSearchAgentByPlace.dataset.placeId,frmSearchAgentByPlace.dataset.placeAddress,"address","id",LocalStogeEnum.ALL_PLACES,bindingDataCompleteCallBack,bindingDataFailedCallback,selectionCallback,"#placeId",6,3)}function bindingDataCompleteCallBack(){}function bindingDataFailedCallback(){}function selectionCallback(e,t,a){t&&(LocalStorageHelper.Save(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME,{id:a,address:t.item.display}),placeId.value=a)}!function(e){function t(e,t){for(var a=window,n=(e||"").split(".");a&&n.length;)a=a[n.shift()];return"function"==typeof a?a:(t.push(e),Function.constructor.apply(null,t))}function a(e){return"GET"===e||"POST"===e}function n(e,t){a(t)||e.setRequestHeader("X-HTTP-Method-Override",t)}function r(t,a,n){var r;a&&void 0!==a.isUpdateLayout&&!a.isUpdateLayout||n.indexOf("application/x-javascript")===-1&&(r=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),e(t.getAttribute("data-ajax-update")).each(function(t,n){var o;switch(r){case"BEFORE":o=n.firstChild,e("<div />").html(a).contents().each(function(){n.insertBefore(this,o)});break;case"AFTER":e("<div />").html(a).contents().each(function(){n.appendChild(this)});break;case"REPLACE-WITH":e(n).replaceWith(a);break;default:e(n).html(a)}}))}function o(o,d){var i,c,l,u;i=o.getAttribute("data-ajax-confirm"),i&&!window.confirm(i)||(c=e(o.getAttribute("data-ajax-loading")),u=parseInt(o.getAttribute("data-ajax-loading-duration"),10)||0,e.extend(d,{type:o.getAttribute("data-ajax-method")||void 0,url:o.getAttribute("data-ajax-url")||void 0,cache:!!o.getAttribute("data-ajax-cache"),beforeSend:function(e){var a;return n(e,l),a=t(o.getAttribute("data-ajax-begin"),["xhr"]).apply(o,arguments),a!==!1&&c.show(u),a},complete:function(){c.hide(u),t(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(o,arguments),console.log("complete")},success:function(e,a,n){r(o,e,n.getResponseHeader("Content-Type")||"text/html"),t(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(o,arguments),console.log("success")},error:function(){t(o.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(o,arguments),console.log("error")}}),d.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),l=d.type.toUpperCase(),a(l)||(d.type="POST",d.data.push({name:"X-HTTP-Method-Override",value:l})),e.ajax(d))}function d(t){var a=e(t).data(l);return!a||!a.validate||a.validate()}var i="unobtrusiveAjaxClick",c="unobtrusiveAjaxClickTarget",l="unobtrusiveValidation";e(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),o(this,{url:this.href,type:"GET",data:[]})}),e(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,n=e(t.target),r=e(n.parents("form")[0]),o=n.offset();r.data(i,[{name:a+".x",value:Math.round(t.pageX-o.left)},{name:a+".y",value:Math.round(t.pageY-o.top)}]),setTimeout(function(){r.removeData(i)},0)}),e(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,n=e(t.target),r=e(n.parents("form")[0]);r.data(i,a?[{name:a,value:t.currentTarget.value}]:[]),r.data(c,n),setTimeout(function(){r.removeData(i),r.removeData(c)},0)}),e(document).on("submit","form[data-ajax=true]",function(t){var a=e(this).data(i)||[],n=e(this).data(c),r=n&&n.hasClass("cancel");t.preventDefault(),(r||d(this))&&o(this,{url:this.action,type:this.method||"GET",data:a.concat(e(this).serializeArray())})})}(jQuery);var swiperAgent=null;document.addEventListener("DOMContentLoaded",function(){});var frmSearchAgentByPlace,txtSearch,fuzzyComplete,placeId,frmLoadContact,txtUserId,btnSubmitModel;document.addEventListener("DOMContentLoaded",function(){innitSearchAgentPage(),elasticSearchBinding(),InitAgentTableRow()});