"use strict";function TabPages(){this.Extend=function(e,t,a){var n=e.dataset.activeTabNumber;this.SelectedTabNumber=+n||-1,this.NavElement=e,this.Tabs=t,this.TabContains=a,this.Process()},this.Process=function(){for(var e=this,t=0;t<this.Tabs.length;t++)this.Tabs[t].addEventListener("click",function(t){t.currentTarget.dataset.tabUrl&&history.replaceState(null,null,t.currentTarget.dataset.tabUrl),e.SelectedTabNumber=+t.currentTarget.dataset.tab||-1,e.NavElement.dataset.activeTabNumber=e.SelectedTabNumber,Site.BeLazyRevalidate()})},this.Init=function(e){var t=document.querySelector(e),a=t.querySelectorAll("[data-tab]"),n=t.querySelectorAll("[data-tab-content]");this.Extend(t,a,n)}}function ReBindingView(){Site.ReValidateForm(document.querySelectorAll("[data-form-submit-lead]")),LoadCleave(),LoadSwiperAgent(),AddEventDropdownList()}function AddEventDropdownList(){var e=document.querySelector("[name='LeadDataModel.RoomMin']"),t=document.querySelector("[name='LeadDataModel.RoomMax']");UpdateEventCuple(e,t);var a=document.querySelector("[name='LeadDataModel.RoadMin']"),n=document.querySelector("[name='LeadDataModel.RoadMax']");UpdateEventCuple(a,n);var i=document.querySelector("[name='LeadDataModel.SizeMin']"),r=document.querySelector("[name='LeadDataModel.SizeMax']");UpdateEventCuple(i,r);var o=document.querySelector("[name='LeadDataModel.PriceMin']"),l=document.querySelector("[name='LeadDataModel.PriceMax']");UpdateEventCuple(o,l)}function UpdateEventCuple(e,t){e&&t&&e.addEventListener("change",function(e){for(var a=+e.target.value,n=t.querySelectorAll("option"),i=0;i<n.length;i++)+n[i].value<a?n[i].setAttribute("disabled",""):n[i].removeAttribute("disabled");a>t.value&&(t.selectedIndex=0)})}function LoadSwiperAgent(){var e=document.querySelector("._p-SliderAgentContactForm .swiper-container");e&&(swiperAgent=new Swiper(e,{paginationType:"fraction",effect:"flip",initialSlide:+e.dataset.activeSlide,grabCursor:!0,loop:!0,navigation:{nextEl:".fa-angle-left",prevEl:".fa-angle-right"},pagination:{el:"._p-paging"}}),swiperAgent.on("slideChange",function(){var e=swiperAgent.slides[swiperAgent.activeIndex],t=document.querySelector("[name='LeadDataModel.ReceiAgentId']");t.value=e.dataset.agentId;var a=e.dataset.agentImage,n=document.querySelector("[data-agent-thank-image]");n&&n.setAttribute("src",a);var i=e.dataset.agentName,r=document.querySelector("[data-agent-thank-name]");r&&(r.innerText=i),UpdateBtn()}),UpdateBtn())}function UpdateBtn(){var e=swiperAgent.slides[swiperAgent.activeIndex],t=document.querySelector("._p-SliderAgentContactForm [data-btn]");+e.dataset.curentLead>+e.dataset.maxLead?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")}function LoadCleave(){for(var e=document.querySelectorAll("[name='LeadDataModel.PhoneNumber']"),t=0;t<e.length;t++){new Cleave(e[t],{numericOnly:!0,delimiters:[" ",".",".","."],prefix:"+84",blocks:[3,3,3,5]})}}function fuzzySearchInit(){function e(e,t){btnSubmitPlaceId.removeAttribute("disabled")}function t(e,t){Site.NotifyFormFailed("LỖI","Lấy dự liệu thất bại. Vui lòng làm mới lại trang. Hoặc thông báo cho chugn1 tôi biết quá webmaster@baocat.vn")}var a=LocalStorageHelper.Get(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME);fuzzyComplete=new BcFuzzySearch,fuzzyComplete.Init("#txtPlaceId",null!=a?a.id:null,null!=a?a.address:"","address","id",LocalStogeEnum.ALL_PLACES,e,t,selectionCallback,null,10,3),fuzzyCompleteUser=new BcFuzzySearch,fuzzyCompleteUser.Init("#txtPlaceInput",null!=a?a.id:null,null!=a?a.address:"","address","id",LocalStogeEnum.ALL_PLACES,e,t,selectionCallbackUser,"#txtPlaceId",10,3)}function selectionCallback(e,t,a){console.log(a),t&&(LocalStorageHelper.Save(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME,{id:a,address:t.item.display}),placeId.value=a)}function selectionCallbackUser(e,t,a){console.log(a),t&&(LocalStorageHelper.Save(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME,{id:a,address:t.item.display}),placeId.value=a)}function init(){chkTongle=document.getElementById("chkShowChangePasswordBox"),tabNav=new TabPages,tabNav.Init("[data-active-tab-number]");var e=document.getElementById("resizeContainer"),t=new Croppie(e,{viewport:{width:80,height:80},boundary:{width:160,height:120},showZoomer:!0,enableResize:!1,enableOrientation:!0});avartaInputFile.addEventListener("change",function(e){if(e.target.files&&e.target.files[0]){var a=new FileReader;a.onload=function(e){content1.classList.add("hide"),content2.classList.remove("hide"),t.bind({url:e.target.result})},a.readAsDataURL(e.target.files[0])}}),btnCancel.addEventListener("click",function(e){content1.classList.remove("hide"),content2.classList.add("hide")}),btnSubmitAvarta.addEventListener("click",function(e){t.result("base64").then(function(e){base64Image.value=e})})}function ChangeAvarta(e,t){"success"===t&&(imgAvarta.src=e+"?clearcache="+(new Date).getTime(),btnCancel.click())}function loadCleave(){var e=document.getElementById("BasicUserInfoViewModel_Mobile");new Cleave(e,{numericOnly:!0,delimiters:[" "," "," "," "],prefix:"+84",blocks:[3,3,3,5]}),new Cleave("#BasicUserInfoViewModel_Birthday",{date:!0,datePattern:["d","m","Y"]}),new Cleave("#BasicUserInfoViewModel_IdCard",{numericOnly:!0,delimiter:" ",blocks:[3,3,3]})}function initLoginTab(){btnVerifyEmail&&btnVerifyEmail.addEventListener("click",function(e){AjaxRequest.SendRequestGetJson("POST","/dashboard/userinfo/VeryfyEmailAsync",null,function(e,t){200===+t?(Site.Notify("THÔNG BÁO","Vui lòng xác nhận email "+e,!1,"sucess","Xác nhận"),btnVerifyEmail.classList.add("hide")):Site.Notify("THÔNG BÁO","Có lỗi xảy ra, không thể gửi Email xác nhận",!0,"error",null,!0)})})}function ChangePassSucessful(){chkTongle.checked=!1}!function(e){function t(e,t){for(var a=window,n=(e||"").split(".");a&&n.length;)a=a[n.shift()];return"function"==typeof a?a:(t.push(e),Function.constructor.apply(null,t))}function a(e){return"GET"===e||"POST"===e}function n(e,t){a(t)||e.setRequestHeader("X-HTTP-Method-Override",t)}function i(t,a,n){var i;a&&void 0!==a.isUpdateLayout&&!a.isUpdateLayout||n.indexOf("application/x-javascript")===-1&&(i=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),e(t.getAttribute("data-ajax-update")).each(function(t,n){var r;switch(i){case"BEFORE":r=n.firstChild,e("<div />").html(a).contents().each(function(){n.insertBefore(this,r)});break;case"AFTER":e("<div />").html(a).contents().each(function(){n.appendChild(this)});break;case"REPLACE-WITH":e(n).replaceWith(a);break;default:e(n).html(a)}}))}function r(r,o){var l,d,c,u;l=r.getAttribute("data-ajax-confirm"),l&&!window.confirm(l)||(d=e(r.getAttribute("data-ajax-loading")),u=parseInt(r.getAttribute("data-ajax-loading-duration"),10)||0,e.extend(o,{type:r.getAttribute("data-ajax-method")||void 0,url:r.getAttribute("data-ajax-url")||void 0,cache:!!r.getAttribute("data-ajax-cache"),beforeSend:function(e){var a;return n(e,c),a=t(r.getAttribute("data-ajax-begin"),["xhr"]).apply(r,arguments),a!==!1&&d.show(u),a},complete:function(){d.hide(u),t(r.getAttribute("data-ajax-complete"),["xhr","status"]).apply(r,arguments),console.log("complete")},success:function(e,a,n){i(r,e,n.getResponseHeader("Content-Type")||"text/html"),t(r.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(r,arguments),console.log("success")},error:function(){t(r.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(r,arguments),console.log("error")}}),o.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),c=o.type.toUpperCase(),a(c)||(o.type="POST",o.data.push({name:"X-HTTP-Method-Override",value:c})),e.ajax(o))}function o(t){var a=e(t).data(c);return!a||!a.validate||a.validate()}var l="unobtrusiveAjaxClick",d="unobtrusiveAjaxClickTarget",c="unobtrusiveValidation";e(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),r(this,{url:this.href,type:"GET",data:[]})}),e(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,n=e(t.target),i=e(n.parents("form")[0]),r=n.offset();i.data(l,[{name:a+".x",value:Math.round(t.pageX-r.left)},{name:a+".y",value:Math.round(t.pageY-r.top)}]),setTimeout(function(){i.removeData(l)},0)}),e(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,n=e(t.target),i=e(n.parents("form")[0]);i.data(l,a?[{name:a,value:t.currentTarget.value}]:[]),i.data(d,n),setTimeout(function(){i.removeData(l),i.removeData(d)},0)}),e(document).on("submit","form[data-ajax=true]",function(t){var a=e(this).data(l)||[],n=e(this).data(d),i=n&&n.hasClass("cancel");t.preventDefault(),(i||o(this))&&r(this,{url:this.action,type:this.method||"GET",data:a.concat(e(this).serializeArray())})})}(jQuery);var swiperAgent=null;document.addEventListener("DOMContentLoaded",function(){});var content1,content2,btnCancel,avartaInputFile,btnSubmitAvarta,base64Image,imgAvarta,placeId,tabNav,btnSubmitPlaceId,btnVerifyEmail,chkTongle,fuzzyComplete,fuzzyCompleteUser;document.addEventListener("DOMContentLoaded",function(){content1=document.getElementById("content1"),content2=document.getElementById("content2"),btnCancel=document.getElementById("btnCancel"),btnSubmitPlaceId=document.getElementById("btnSubmitPlaceId"),btnSubmitAvarta=document.getElementById("btnSubmitAvarta"),avartaInputFile=document.getElementById("avartaUpload"),base64Image=document.getElementById("base64Image"),imgAvarta=document.getElementById("imgAvarta"),placeId=document.getElementById("txtPlaceId"),init(),loadCleave(),fuzzySearchInit(),btnVerifyEmail=document.getElementById("btnVerifyEmail"),initLoginTab()});