"use strict";function initCheckboxUserPlaces(){for(var e=document.querySelectorAll("[data-notify-chk]"),t=0;t<e.length;t++){var a=e[t];a.addEventListener("change",function(e){var t=e.target,a={productPlaceId:+t.dataset.id,notifyType:+t.dataset.type,isEnable:t.checked};AjaxRequest.SendRequestGetJson("POST","/dashboard/userinfo/userPlaceChangeNotify",a,function(e,t){200===+t?Site.Notify("THÔNG BÁO","Thay đổi thành công",!0,"info",null,!0):(Site.Notify("THÔNG BÁO","Thay đổi thất bại",!0,"error",null,!0),window.location.reload())})})}}function init(){}!function(e){function t(e,t){for(var a=window,n=(e||"").split(".");a&&n.length;)a=a[n.shift()];return"function"==typeof a?a:(t.push(e),Function.constructor.apply(null,t))}function a(e){return"GET"===e||"POST"===e}function n(e,t){a(t)||e.setRequestHeader("X-HTTP-Method-Override",t)}function r(t,a,n){var r;a&&void 0!==a.isUpdateLayout&&!a.isUpdateLayout||n.indexOf("application/x-javascript")===-1&&(r=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),e(t.getAttribute("data-ajax-update")).each(function(t,n){var c;switch(r){case"BEFORE":c=n.firstChild,e("<div />").html(a).contents().each(function(){n.insertBefore(this,c)});break;case"AFTER":e("<div />").html(a).contents().each(function(){n.appendChild(this)});break;case"REPLACE-WITH":e(n).replaceWith(a);break;default:e(n).html(a)}}))}function c(c,i){var o,l,d,u;o=c.getAttribute("data-ajax-confirm"),o&&!window.confirm(o)||(l=e(c.getAttribute("data-ajax-loading")),u=parseInt(c.getAttribute("data-ajax-loading-duration"),10)||0,e.extend(i,{type:c.getAttribute("data-ajax-method")||void 0,url:c.getAttribute("data-ajax-url")||void 0,cache:!!c.getAttribute("data-ajax-cache"),beforeSend:function(e){var a;return n(e,d),a=t(c.getAttribute("data-ajax-begin"),["xhr"]).apply(c,arguments),a!==!1&&l.show(u),a},complete:function(){l.hide(u),t(c.getAttribute("data-ajax-complete"),["xhr","status"]).apply(c,arguments),console.log("complete")},success:function(e,a,n){r(c,e,n.getResponseHeader("Content-Type")||"text/html"),t(c.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(c,arguments),console.log("success")},error:function(){t(c.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(c,arguments),console.log("error")}}),i.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),d=i.type.toUpperCase(),a(d)||(i.type="POST",i.data.push({name:"X-HTTP-Method-Override",value:d})),e.ajax(i))}function i(t){var a=e(t).data(d);return!a||!a.validate||a.validate()}var o="unobtrusiveAjaxClick",l="unobtrusiveAjaxClickTarget",d="unobtrusiveValidation";e(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),c(this,{url:this.href,type:"GET",data:[]})}),e(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,n=e(t.target),r=e(n.parents("form")[0]),c=n.offset();r.data(o,[{name:a+".x",value:Math.round(t.pageX-c.left)},{name:a+".y",value:Math.round(t.pageY-c.top)}]),setTimeout(function(){r.removeData(o)},0)}),e(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,n=e(t.target),r=e(n.parents("form")[0]);r.data(o,a?[{name:a,value:t.currentTarget.value}]:[]),r.data(l,n),setTimeout(function(){r.removeData(o),r.removeData(l)},0)}),e(document).on("submit","form[data-ajax=true]",function(t){var a=e(this).data(o)||[],n=e(this).data(l),r=n&&n.hasClass("cancel");t.preventDefault(),(r||i(this))&&c(this,{url:this.action,type:this.method||"GET",data:a.concat(e(this).serializeArray())})})}(jQuery);var CheckboxTreeView={Process:function(){for(var e=document.querySelectorAll("[data-tree-parent-id]"),t=0;t<e.length;t++){var a=document.getElementById(e[t].dataset.treeParentId),n=Site.FindParent(a,"_nodeContainer");a.checked=!n.querySelector("[data-tree-parent-id]:not(:checked)"),a.addEventListener("change",function(e){for(var t=Site.FindParent(e.target,"_nodeContainer"),a=t.querySelectorAll("[data-tree-parent-id]"),n=[],r=0;r<a.length;r++)a[r].checked=e.target.checked,a[r].checked&&n.push(a[r].value);CheckboxTreeView.CheckAllCallBack&&n.length>0?CheckboxTreeView.CheckAllCallBack(n):CheckboxTreeView.CheckAllCallBack&&0===n.length&&CheckboxTreeView.CheckNoneCallBack()}),e[t].addEventListener("change",function(e){var t=document.getElementById(e.target.dataset.treeParentId),a=Site.FindParent(t,"_nodeContainer");if(t&&a){for(var n=a.querySelectorAll("[data-tree-parent-id]"),r=!0,c=!1,i=[],o=0;o<n.length;o++)r=r&&n[o].checked,c=c||n[o].checked,n[o].checked&&i.push(n[o].value);c?r?(t.checked=!0,CheckboxTreeView.CheckAllCallBack&&CheckboxTreeView.CheckAllCallBack(i)):(t.checked=!1,t.indeterminate=CheckboxTreeView.EnableIndeterminate,CheckboxTreeView.CheckManyCallback&&CheckboxTreeView.CheckManyCallback(i)):(t.checked=!1,CheckboxTreeView.CheckNoneCallBack&&CheckboxTreeView.CheckNoneCallBack())}})}},Init:function(e,t,a,n){CheckboxTreeView.EnableIndeterminate=!!e,CheckboxTreeView.CheckAllCallBack=t,CheckboxTreeView.CheckNoneCallBack=a,CheckboxTreeView.CheckManyCallback=n,CheckboxTreeView.Process()}},content1,content2,btnCancel,avartaInputFile,btnSubmitAvarta,base64Image,imgAvarta,placeId,tabNav;document.addEventListener("DOMContentLoaded",function(){init(),Site.MomentTime(),initCheckboxUserPlaces(),CheckboxTreeView.Init()});