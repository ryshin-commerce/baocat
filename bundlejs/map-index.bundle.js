"use strict";function InfoBox(e){e=e||{},google.maps.OverlayView.apply(this,arguments),this.content_=e.content||"",this.disableAutoPan_=e.disableAutoPan||!1,this.maxWidth_=e.maxWidth||0,this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0),this.position_=e.position||new google.maps.LatLng(0,0),this.zIndex_=e.zIndex||null,this.boxClass_=e.boxClass||"infoBox",this.boxStyle_=e.boxStyle||{},this.closeBoxMargin_=e.closeBoxMargin||"2px",this.closeBoxURL_=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===e.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1),this.isHidden_=e.isHidden||!1,this.alignBottom_=e.alignBottom||!1,this.pane_=e.pane||"floatPane",this.enableEventPropagation_=e.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function LoadInfoBoxPrototype(){InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var e,a,t,o=this,n=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},i=function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),o.enableEventPropagation_||n(e)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(t=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-t.left-t.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],e=0;e<a.length;e++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,a[e],n));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",i),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var e="";return""!==this.closeBoxURL_&&(e="<img",e+=" src='"+this.closeBoxURL_+"'",e+=" align=right",e+=" style='",e+=" position: absolute;",e+=" cursor: pointer;right: 0;",e+=" margin: "+this.closeBoxMargin_+";",e+="'>"),e},InfoBox.prototype.addClickHandler_=function(){var e;""!==this.closeBoxURL_?(e=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var e=this;return function(a){a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),google.maps.event.trigger(e,"closeclick"),e.close()}},InfoBox.prototype.panBox_=function(e){var a,t,o=0,n=0;if(!e&&(a=this.getMap(),a instanceof google.maps.Map)){a.getBounds().contains(this.position_)||a.setCenter(this.position_),t=a.getBounds();var i=a.getDiv(),r=i.offsetWidth,l=i.offsetHeight,s=this.pixelOffset_.width,p=this.pixelOffset_.height,d=this.div_.offsetWidth,c=this.div_.offsetHeight,u=this.infoBoxClearance_.width,g=this.infoBoxClearance_.height,m=this.getProjection().fromLatLngToContainerPixel(this.position_);m.x<-s+u?o=m.x+s-u:m.x+d+s+u>r&&(o=m.x+d+s+u-r),this.alignBottom_?m.y<-p+g+c?n=m.y+p-g-c:m.y+p+g>l&&(n=m.y+p+g-l):m.y<-p+g?n=m.y+p-g:m.y+c+p+g>l&&(n=m.y+c+p+g-l),0===o&&0===n||a.panBy(o,n)}},InfoBox.prototype.setBoxStyle_=function(){var e,a;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",a=this.boxStyle_;for(e in a)a.hasOwnProperty(e)&&(this.div_.style[e]=a[e]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var e,a={top:0,bottom:0,left:0,right:0},t=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(e=t.ownerDocument.defaultView.getComputedStyle(t,""),e&&(a.top=parseInt(e.borderTopWidth,10)||0,a.bottom=parseInt(e.borderBottomWidth,10)||0,a.left=parseInt(e.borderLeftWidth,10)||0,a.right=parseInt(e.borderRightWidth,10)||0)):document.documentElement.currentStyle&&t.currentStyle&&(a.top=parseInt(t.currentStyle.borderTopWidth,10)||0,a.bottom=parseInt(t.currentStyle.borderBottomWidth,10)||0,a.left=parseInt(t.currentStyle.borderLeftWidth,10)||0,a.right=parseInt(t.currentStyle.borderRightWidth,10)||0),a},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px":this.div_.style.top=e.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(e){"undefined"!=typeof e.boxClass&&(this.boxClass_=e.boxClass,this.setBoxStyle_()),"undefined"!=typeof e.boxStyle&&(this.boxStyle_=e.boxStyle,this.setBoxStyle_()),"undefined"!=typeof e.content&&this.setContent(e.content),"undefined"!=typeof e.disableAutoPan&&(this.disableAutoPan_=e.disableAutoPan),"undefined"!=typeof e.maxWidth&&(this.maxWidth_=e.maxWidth),"undefined"!=typeof e.pixelOffset&&(this.pixelOffset_=e.pixelOffset),"undefined"!=typeof e.alignBottom&&(this.alignBottom_=e.alignBottom),"undefined"!=typeof e.position&&this.setPosition(e.position),"undefined"!=typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!=typeof e.closeBoxMargin&&(this.closeBoxMargin_=e.closeBoxMargin),"undefined"!=typeof e.closeBoxURL&&(this.closeBoxURL_=e.closeBoxURL),"undefined"!=typeof e.infoBoxClearance&&(this.infoBoxClearance_=e.infoBoxClearance),"undefined"!=typeof e.isHidden&&(this.isHidden_=e.isHidden),"undefined"!=typeof e.enableEventPropagation&&(this.enableEventPropagation_=e.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(e){this.content_=e,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(e){this.position_=e,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(e){this.zIndex_=e,this.div_&&(this.div_.style.zIndex=e),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(e,a){var t=this;a&&(this.position_=a.getPosition(),this.moveListener_=google.maps.event.addListener(a,"position_changed",function(){t.setPosition(this.getPosition())})),this.setMap(e),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var e;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(e=0;e<this.eventListeners_.length;e++)google.maps.event.removeListener(this.eventListeners_[e]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)}}function ReBindingView(){Site.ReValidateForm(document.querySelectorAll("[data-form-submit-lead]")),LoadCleave(),LoadSwiperAgent(),AddEventDropdownList()}function AddEventDropdownList(){var e=document.querySelector("[name='LeadDataModel.RoomMin']"),a=document.querySelector("[name='LeadDataModel.RoomMax']");UpdateEventCuple(e,a);var t=document.querySelector("[name='LeadDataModel.RoadMin']"),o=document.querySelector("[name='LeadDataModel.RoadMax']");UpdateEventCuple(t,o);var n=document.querySelector("[name='LeadDataModel.SizeMin']"),i=document.querySelector("[name='LeadDataModel.SizeMax']");UpdateEventCuple(n,i);var r=document.querySelector("[name='LeadDataModel.PriceMin']"),l=document.querySelector("[name='LeadDataModel.PriceMax']");UpdateEventCuple(r,l)}function UpdateEventCuple(e,a){e&&a&&e.addEventListener("change",function(e){for(var t=+e.target.value,o=a.querySelectorAll("option"),n=0;n<o.length;n++)+o[n].value<t?o[n].setAttribute("disabled",""):o[n].removeAttribute("disabled");t>a.value&&(a.selectedIndex=0)})}function LoadSwiperAgent(){var e=document.querySelector("._p-SliderAgentContactForm .swiper-container");e&&(swiperAgent=new Swiper(e,{paginationType:"fraction",effect:"flip",initialSlide:+e.dataset.activeSlide,grabCursor:!0,loop:!0,navigation:{nextEl:".fa-angle-left",prevEl:".fa-angle-right"},pagination:{el:"._p-paging"}}),swiperAgent.on("slideChange",function(){var e=swiperAgent.slides[swiperAgent.activeIndex],a=document.querySelector("[name='LeadDataModel.ReceiAgentId']");a.value=e.dataset.agentId;var t=e.dataset.agentImage,o=document.querySelector("[data-agent-thank-image]");o&&o.setAttribute("src",t);var n=e.dataset.agentName,i=document.querySelector("[data-agent-thank-name]");i&&(i.innerText=n),UpdateBtn()}),UpdateBtn())}function UpdateBtn(){var e=swiperAgent.slides[swiperAgent.activeIndex],a=document.querySelector("._p-SliderAgentContactForm [data-btn]");+e.dataset.curentLead>+e.dataset.maxLead?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled")}function LoadCleave(){for(var e=document.querySelectorAll("[name='LeadDataModel.PhoneNumber']"),a=0;a<e.length;a++){new Cleave(e[a],{numericOnly:!0,delimiters:[" ",".",".","."],prefix:"+84",blocks:[3,3,3,5]})}}function InitControls(){markPlaceAddress=document.getElementById("markPlaceAddress"),frmAdvanceSearch=document.getElementById("frmAdvanceSearch"),rangePriceLabel=document.getElementById("rangePriceLabel"),rangeRoomLabel=document.getElementById("rangeRoomLabel"),rangeSizeLabel=document.getElementById("rangeSizeLabel"),userInput=document.getElementById("UserInput")}function BindingEvent(){markPlaceAddress.addEventListener("keypress",function(e){var a=e.keyCode?e.keyCode:e.which;13===a&&btnSearch.click()}),markPlaceAddress.addEventListener("keyup",function(e){userInput.value=e.target.value})}function InitComboboxSearchType(){var e=document.getElementById("SelectedPropertyGroupType");e.addEventListener("change",function(e){Site.RemoveClass("._p-check-property-type","show"),Site.AddClass("._p-check-property-type","hide");for(var a=e.target.value,t=document.querySelectorAll("._p-check-property-type"),o=0;o<t.length;o++){var n=t[o];if(n.dataset.value===a){Site.RemoveClassElement(n,"hide"),Site.AddClassElement(n,"show");var i=n.dataset.refix;frmAdvanceSearch.action=frmAdvanceSearch.dataset.actionTemplate.replace("REFIX",i).replace("{PAGE}",1)}}}),e.dispatchEvent(new Site.CreateEvent("change"))}function InnitElasticSearch(){var e=LocalStorageHelper.Get(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME);fuzzyComplete=new BcFuzzySearch,fuzzyComplete.Init("#markPlaceAddress",null!=e?e.id:null,null!=e?e.address:"","address","id",LocalStogeEnum.ALL_PLACES,bindingDataCompleteCallBack,bindingDataFailedCallback,selectionCallback,"#frmAdvanceSearch #PlaceId",10,3),e&&(markPlaceAddress.value=e.address)}function bindingDataCompleteCallBack(e,a){}function bindingDataFailedCallback(e,a){Site.NotifyFormFailed("LỖI","Lấy dự liệu thất bại. Vui lòng làm mới lại trang. Hoặc thông báo cho chugn1 tôi biết quá webmaster@baocat.vn")}function selectionCallback(e,a,t){if(console.log(t),a){LocalStorageHelper.Save(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME,{id:t,address:a.item.display});var o=SeoUrl.MapSearchUrl(frmAdvanceSearch.dataset.refix,a.item.display,t,1);frmAdvanceSearch.action=o}else frmSubmit.placeId.value=null}function InputSearchInputCallBack(e){}function InitSlider(){var e,a,t=document.getElementById("rangePrice");noUiSlider.create(t,{range:{min:[0],"5%":[2e8,1e8],"70%":[4e9,1e9],"80%":[1e10,2e9],"95%":[2e10,5e9],max:[25e9]},start:[0,25e9],step:1e8,connect:!0,pips:{mode:"count",values:9,density:2,stepped:!0,format:wNumb({decimals:0,edit:function(e){return e=+e,0===e?0:25e9===e?"...":e<1e9?e/1e6+" tr":e/1e9+" tỷ"}})}}),e=t.dataset.min||0,a=t.dataset.max||99999999999999,t.noUiSlider.set([e,a]),t.noUiSlider.on("update",function(e,a){var t,o;frmAdvanceSearch.RangePriceMin.value=null,frmAdvanceSearch.RangePriceMax.value=null,0===+e[0]?t="Dưới ":25e9===+e[0]?t="":+e[0]<1e9?(t=+e[0]/1e6+" triệu",frmAdvanceSearch.RangePriceMin.value=+e[0]):(t=+e[0]/1e9+" tỷ",frmAdvanceSearch.RangePriceMin.value=+e[0]),0===+e[1]?t="":25e9===+e[1]?0===+e[0]?(o="Tất cả",t=""):(o="",t="Trên "+t):+e[1]<1e9?(o=+e[1]/1e6+" triệu",frmAdvanceSearch.RangePriceMax.value=+e[1]):(o=+e[1]/1e9+" tỷ",frmAdvanceSearch.RangePriceMax.value=+e[1]),o===t&&(t=""),""!==t&&""!==o&&0!==+e[0]&&(t+=" - "),rangePriceLabel.innerText=t+o});var o=document.getElementById("rangeRoom");noUiSlider.create(o,{range:{min:[0],"95%":[10,1],max:[11]},start:[0,100],step:1,stepped:!0,connect:!0,pips:{mode:"count",values:12,density:1,stepped:!0,format:wNumb({decimals:0,edit:function(e){return e=+e,0===e?0:11===e?"...":e}})}}),e=o.dataset.min||0,a=o.dataset.max||99999999999999,o.noUiSlider.set([e,a]),o.noUiSlider.on("update",function(e,a){var t,o;frmAdvanceSearch.RangeRoomMin.value=null,frmAdvanceSearch.RangeRoomMax.value=null,0===+e[0]?t="Dưới ":11===+e[0]?t="":(t=+e[0],frmAdvanceSearch.RangeRoomMin.value=+e[0]),0===+e[1]?t="":11===+e[1]?0===+e[0]?(o="Tất cả",t=""):(o="",t="Trên "+t):(o=+e[1],frmAdvanceSearch.RangeRoomMax.value=+e[1]),o===t&&(t=""),""!==t&&""!==o&&0!==+e[0]&&(t+=" - "),rangeRoomLabel.innerText=t+o});var n=document.getElementById("rangeSize");noUiSlider.create(n,{range:{min:[0],"5%":[20,10],"30%":[100,10],"70%":[300,10],"95%":[1e3,10],max:[1010]},start:[0,1e4],step:10,density:1,connect:!0,pips:{mode:"values",values:[30,50,100,150,200,250,300,500,700,900,1010],format:wNumb({decimals:0,edit:function(e){return e=+e,0===e?0:1010===e?"...":e}})}}),e=n.dataset.min||0,a=n.dataset.max||99999999999999,n.noUiSlider.set([e,a]),n.noUiSlider.on("update",function(e,a){var t,o;frmAdvanceSearch.RangeSizeMin.value=null,frmAdvanceSearch.RangeSizeMax.value=null,0===+e[0]?t="Dưới ":1010===+e[0]?t="":(t=+e[0],frmAdvanceSearch.RangeSizeMin.value=Math.round(e[0])),0===+e[1]?t="":1010===+e[1]?0===+e[0]?(o="Tất cả",t=""):(o="",t="Trên "+t+" m<sup class='text-12'>2<sup/>"):(o=+e[1]+" m<sup class='text-12'>2<sup/>",frmAdvanceSearch.RangeSizeMax.value=Math.round(e[1])),o===t&&(t=""),""!==t&&""!==o&&0!==+e[0]&&(t+=" - "),rangeSizeLabel.innerHTML=t+o})}function RefreshListProSaved(e,a){Site.AddClassNameInTime("[data-btn-saved-property]","_blink",1e3);var t=Site.FindParent(e,"_property-item");if(null!=t){var o=new FormData;o.append("PropertyId",t.dataset.propId),console.log(t.dataset.propId);var n;a?(n="//"+document.location.host+"/PublicProperty/SaveProperty",AjaxRequest.SendFormData("POST",n,o,function(e,a){"undefined"!=typeof google&&google&&google.maps&&google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"),savedPropertiesNumber&&(savedPropertiesNumber.innerText=e)},null)):(n="//"+document.location.host+"/PublicProperty/RemoveSavedProperty",AjaxRequest.SendFormData("POST",n,o,function(e,a){"undefined"!=typeof google&&google&&google.maps&&google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"),savedPropertiesNumber&&(savedPropertiesNumber.innerText=e,ReloadSavedForm())},null))}}function ReloadSavedForm(){var e=document.getElementById("formLazyLoaduserHistory"),a=e.querySelector("#btnSubmitUserHistory");a.click()}function RefreshListProViewed(e,a){Site.AddClassNameInTime("[data-btn-viewed-property]","_blink",1e3);var t=Site.FindParent(e,"_property-item");if(null!=t){var o=new FormData;o.append("PropertyId",t.dataset.propId);var n="//"+document.location.host+(a?"/PublicProperty/SaveProperty":"/PublicProperty/RemoveSavedProperty");AjaxRequest.SendFormData("POST",n,o,function(e,a){"undefined"!=typeof google&&google&&google.maps&&google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"),savedPropertiesNumber&&(savedPropertiesNumber.innerText=e),UpdateListSaved()},null)}}function ReloadViewedForm(){var e=document.getElementById("formLazyLoaduserViewed"),a=e.querySelector("#btnSubmitUserViewed");a.click()}function PagingListSaved(){for(var e=document.querySelectorAll("#pagination li button"),a=0;a<e.length;a++)e[a].addEventListener("click",function(e){window.formLazyLoaduserViewed.PageNumber.value=e.target.dataset.value;var a=window.formLazyLoaduserViewed.querySelector("[name='submitType']");a.click()})}function UpdateListSaved(){var e=window.chkShowListSave.form.querySelector("[name='submitType']");e.click()}function ShowPropertyWidgetCallback(){}function LoadMap(){var e=document.getElementById("map"),a={lat:NumberHelper.ToDouble(e.dataset.latitude),lng:NumberHelper.ToDouble(e.dataset.longitude)};+e.dataset.propertyId?activeProp={PropId:+e.dataset.propertyId}:LocalStorageHelper.Get(LocalStogeEnum.MAP_CENTER)&&(a=LocalStorageHelper.Get(LocalStogeEnum.MAP_CENTER));var t=new Object;t.elementSelector="#map",t.mapChangeCallBack=MapChangeEndCallback,t.showPropertyWidgetCallback=ShowPropertyWidgetCallback,t.deaultLatLng=null,t.zoomInSelector="#mapControl ._p-zoom-in",t.zoomOutSelector="#mapControl ._p-zoom-out",t.userGeoSelector="#mapControl ._p-user-geo",t.selectMapTypeSelector="#mapControl ._p-list-type",t.selectMapTypeClass="-rounded",t.scrollwheel=!0,t.defaultZoom=16,t.minZoom=5,t.deaultLatLng=a,t.mainPropertyId=e.dataset.propertyId,t.mainPropertyIcon={anchor:new google.maps.Point(7.5,24),url:e.dataset.mainPropertyIconUrl},t.infoBoxShowCallBack=InfoBoxShowCallBack,GMap.Init(t),GMap.LoadMap()}function InfoBoxShowCallBack(e){e&&history.replaceState(null,"Lựa chọn gói Agent","/ban-do/"+e)}function MapChangeEndCallback(e,a){var t=e.getNorthEast(),o=e.getSouthWest();LoadMapAjax(a,t,o,0),LocalStorageHelper.Save(LocalStogeEnum.MAP_CENTER,GMap.Map.getCenter())}function LoadMapAjax(e,a,t,o){if(!disableLoadingMap){disableLoadingMap=!0,Site.RemoveClassElement(loadingMapAnimation,"hide");var n,i=new FormData;i.append("NeLat",a.lat().ToFrDouble()),i.append("NeLng",a.lng().ToFrDouble()),i.append("SwLat",t.lat().ToFrDouble()),i.append("SwLng",t.lng().ToFrDouble()),e>13?(GMap.ClearMarker(GMap.MetaDataType.LOCALITY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV2),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV1),i=new FormData(window.frmAdvanceSearch),i.append("PageNumber",o),i.append("NeLat",a.lat().ToFrDouble()),i.append("NeLng",a.lng().ToFrDouble()),i.append("SwLat",t.lat().ToFrDouble()),i.append("SwLng",t.lng().ToFrDouble()),n="//"+document.location.host+"/PublicProperty/GetMapPropertyMarkers",AjaxRequest.SendFormData("POST",n,i,LoadPropertyMarkerSucess,LoadMapItemFailed)):e>11?(GMap.ClearMarker(GMap.MetaDataType.PROPERTY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV2),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV1),n="//"+document.location.host+"/PublicPlaces/GetMapLocalityMarkers",AjaxRequest.SendFormData("POST",n,i,LoadLocalityMarkerSucess,LoadMapItemFailed)):e>9?(GMap.ClearMarker(GMap.MetaDataType.PROPERTY),GMap.ClearMarker(GMap.MetaDataType.LOCALITY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV1),n="//"+document.location.host+"/PublicPlaces/GetMapAdminLevel2Markers",AjaxRequest.SendFormData("POST",n,i,LoadAdminLevel2MarkerSucess,LoadMapItemFailed)):(GMap.ClearMarker(GMap.MetaDataType.PROPERTY),GMap.ClearMarker(GMap.MetaDataType.LOCALITY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV2),n="//"+document.location.host+"/PublicPlaces/GetMapAdminLevel1Markers",AjaxRequest.SendFormData("POST",n,i,LoadAdminLevel1MarkerSucess,LoadMapItemFailed))}}function LoadPropertyMarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var a=JSON.parse(e);if(GMap.AddPropertyMarker(a),null!=activeProp){var t=GMap.GetMarkerByPropId(activeProp.PropId);t&&google.maps.event.trigger(t,"click"),activeProp=null}}function LoadLocalityMarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var a=JSON.parse(e);if(GMap.AddLocalityMarker(a),activeProp){var t=GMap.GetMarkerByPropId(activeProp.PropId);t&&google.maps.event.trigger(t,"click"),activeProp=null}}function LoadAdminLevel2MarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var a=JSON.parse(e);GMap.AddAdminLevel2Marker(a)}function LoadAdminLevel1MarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var a=JSON.parse(e);GMap.AddAdminLevel1Marker(a)}function LoadMapItemFailed(){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100)}!function(e){function a(e,a){for(var t=window,o=(e||"").split(".");t&&o.length;)t=t[o.shift()];return"function"==typeof t?t:(a.push(e),Function.constructor.apply(null,a))}function t(e){return"GET"===e||"POST"===e}function o(e,a){t(a)||e.setRequestHeader("X-HTTP-Method-Override",a)}function n(a,t,o){var n;t&&void 0!==t.isUpdateLayout&&!t.isUpdateLayout||o.indexOf("application/x-javascript")===-1&&(n=(a.getAttribute("data-ajax-mode")||"").toUpperCase(),e(a.getAttribute("data-ajax-update")).each(function(a,o){var i;switch(n){case"BEFORE":i=o.firstChild,e("<div />").html(t).contents().each(function(){o.insertBefore(this,i)});break;case"AFTER":e("<div />").html(t).contents().each(function(){o.appendChild(this)});break;case"REPLACE-WITH":e(o).replaceWith(t);break;default:e(o).html(t)}}))}function i(i,r){var l,s,p,d;l=i.getAttribute("data-ajax-confirm"),l&&!window.confirm(l)||(s=e(i.getAttribute("data-ajax-loading")),d=parseInt(i.getAttribute("data-ajax-loading-duration"),10)||0,e.extend(r,{type:i.getAttribute("data-ajax-method")||void 0,url:i.getAttribute("data-ajax-url")||void 0,cache:!!i.getAttribute("data-ajax-cache"),beforeSend:function(e){var t;return o(e,p),t=a(i.getAttribute("data-ajax-begin"),["xhr"]).apply(i,arguments),t!==!1&&s.show(d),t},complete:function(){s.hide(d),a(i.getAttribute("data-ajax-complete"),["xhr","status"]).apply(i,arguments),console.log("complete")},success:function(e,t,o){n(i,e,o.getResponseHeader("Content-Type")||"text/html"),a(i.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(i,arguments),console.log("success")},error:function(){a(i.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(i,arguments),console.log("error")}}),r.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),p=r.type.toUpperCase(),t(p)||(r.type="POST",r.data.push({name:"X-HTTP-Method-Override",value:p})),e.ajax(r))}function r(a){var t=e(a).data(p);return!t||!t.validate||t.validate()}var l="unobtrusiveAjaxClick",s="unobtrusiveAjaxClickTarget",p="unobtrusiveValidation";e(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),i(this,{url:this.href,type:"GET",data:[]})}),e(document).on("click","form[data-ajax=true] input[type=image]",function(a){var t=a.target.name,o=e(a.target),n=e(o.parents("form")[0]),i=o.offset();n.data(l,[{name:t+".x",value:Math.round(a.pageX-i.left)},{name:t+".y",value:Math.round(a.pageY-i.top)}]),setTimeout(function(){n.removeData(l)},0)}),e(document).on("click","form[data-ajax=true] :submit",function(a){var t=a.currentTarget.name,o=e(a.target),n=e(o.parents("form")[0]);n.data(l,t?[{name:t,value:a.currentTarget.value}]:[]),n.data(s,o),setTimeout(function(){n.removeData(l),n.removeData(s)},0)}),e(document).on("submit","form[data-ajax=true]",function(a){var t=e(this).data(l)||[],o=e(this).data(s),n=o&&o.hasClass("cancel");a.preventDefault(),(n||r(this))&&i(this,{url:this.action,type:this.method||"GET",data:t.concat(e(this).serializeArray())})})}(jQuery);var Pagination={code:"",Extend:function(e){e=e||{},Pagination.size=e.size?parseInt(e.size):0,Pagination.page=e.page?parseInt(e.page):0,Pagination.step=e.step?parseInt(e.step):0,Pagination.tagName=e.tagName||"a",Pagination.attribute=e.attribute||"",Pagination.hrefToken=e.hrefToken||"",Pagination.showValue=!!e.showValue||!1,Pagination.submitFromAttributes=null!=e.form?'form="'+e.form+'" type=submit name="PageNumber"':"",Pagination.hover=e.hover||"",Pagination.itemClassName="",e.hover&&(Pagination.itemClassName+=" class='hover-tooltip' ")},Add:function(e,a){for(var t=e;t<a;t++){var o=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",t)+'"':"",n=Pagination.showValue?'value="'+t+'"':"",i=Pagination.hover?"<span class='tooltip top'>"+Pagination.hover.replace("{PAGE}",t)+"</span>":"";Pagination.code+="<li"+Pagination.itemClassName+"><"+Pagination.tagName+" "+Pagination.submitFromAttributes+" "+o+" "+n+" "+Pagination.attribute+"data-value="+t+" >"+t+"</"+Pagination.tagName+">"+i+"</li>"}},Last:function(){var e=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",Pagination.size>1?Pagination.size:1)+'"':"",a=Pagination.showValue?'value="'+(Pagination.size>1?Pagination.size:1)+'"':"",t=Pagination.hover?"<span class='tooltip top'>"+Pagination.hover.replace("{PAGE}",Pagination.size>1?Pagination.size:1)+"</span>":"";Pagination.code+="<i>...</i><li data-last "+Pagination.itemClassName+" ><"+Pagination.tagName+" "+Pagination.submitFromAttributes+" "+e+" "+a+" "+Pagination.attribute+"data-value="+Pagination.size+">"+Pagination.size+"</"+Pagination.tagName+">"+t+"</li>"},First:function(){var e=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",1)+'"':"",a=Pagination.showValue?'value="1"':"",t=Pagination.hover?"<span class='tooltip top'>"+Pagination.hover.replace("{PAGE}",1)+"</span>":"";Pagination.code+="<li data-first "+Pagination.itemClassName+"><"+Pagination.tagName+" "+Pagination.submitFromAttributes+" "+e+" "+a+" "+Pagination.attribute+" data-value=1>1</"+Pagination.tagName+">"+t+"</li><i>...</i>"},Click:function(){Pagination.page=+this.innerHTML,Pagination.Start()},Prev:function(){Pagination.page--,Pagination.page<1&&(Pagination.page=1),Pagination.Start()},Next:function(){Pagination.page++,Pagination.page>Pagination.size&&(Pagination.page=Pagination.size),Pagination.Start()},Bind:function(){for(var e=Pagination.e.getElementsByTagName(Pagination.tagName),a=0;a<e.length;a++)+e[a].innerHTML===Pagination.page&&(e[a].parentElement.className="current"),Pagination.submitFromAttributes||e[a].addEventListener("click",Pagination.Click,!1)},Finish:function(){Pagination.e.innerHTML=Pagination.code,Pagination.code="",Pagination.Bind()},Start:function(){Pagination.size<2*Pagination.step+6?Pagination.Add(1,Pagination.size+1):Pagination.page<2*Pagination.step+1?(Pagination.Add(1,2*Pagination.step+4),Pagination.Last()):Pagination.page>Pagination.size-2*Pagination.step?(Pagination.First(),Pagination.Add(Pagination.size-2*Pagination.step-2,Pagination.size+1)):(Pagination.First(),Pagination.Add(Pagination.page-Pagination.step,Pagination.page+Pagination.step+1),Pagination.Last()),Pagination.Finish()},Buttons:function(e){var a=e.getElementsByTagName(Pagination.tagName);a[0].addEventListener("click",Pagination.Prev,!1),a[1].addEventListener("click",Pagination.Next,!1)},Create:function(e){var a=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",Pagination.page>1?Pagination.page-1:1)+'"':"",t=Pagination.hrefToken?'href="'+Pagination.hrefToken.replace("{PAGE}",Pagination.size>Pagination.page?Pagination.page+1:Pagination.size)+'"':"",o=Pagination.showValue?'value="'+(Pagination.page>1?Pagination.page-1:1)+'"':"",n=Pagination.showValue?'value="'+(Pagination.page>1?Pagination.page-1:1)+'"':"",i=["<li"+Pagination.itemClassName+"><"+Pagination.tagName+' class="pre" '+Pagination.submitFromAttributes+" "+o+" "+Pagination.attribute+" "+a+" data-value="+(Pagination.page>1?Pagination.page:1)+" >&#9668;</"+Pagination.tagName+"></li>","<span></span>","<li"+Pagination.itemClassName+"><"+Pagination.tagName+' class="next" '+Pagination.submitFromAttributes+" "+n+" "+Pagination.attribute+" "+t+" data-value="+(Pagination.size>Pagination.page?Pagination.page+1:Pagination.size)+" >&#9658;</"+Pagination.tagName+"></li>"];e.innerHTML=i.join(""),Pagination.e=e.getElementsByTagName("span")[0],Pagination.Buttons(e)},Init:function(e,a){Pagination.Extend(a),Pagination.Create(e),Pagination.Start()},Run:function(){for(var e=document.getElementsByClassName("_p-gination"),a=0;a<e.length;a++){var t=e[a];Pagination.Init(t,t.dataset)}}};document.addEventListener("DOMContentLoaded",Pagination.Run(),!1);var sellMarker,rentMarker,locationNameIcon='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="29"><path fill="{{COLOR}}" d="M3.5 20.5L12 29l8.5-8.5c4.67-4.68 4.67-12.28 0-16.97-4.7-4.66-12.3-4.66-17 0-4.67 4.7-4.67 12.3 0 17z"/><circle cx="12" cy="12.02" r="9.96" fill="#e6e6e6"/><text x="11.61" y="15.97" fill="{{COLOR}}" style="font-family: Movoto, sans-serif !important;" text-anchor="middle"><tspan font-weight="bold" font-size="10.67">{{LABEL}}</tspan></text></svg>',markerColor=["blue","red","sky","green","red","orange","blue","green","yellow"],markerActiveColor=["darkblue","darkred","darkturquoise","darkgreen","darkred","darkorange","darkblue","darkgreen","darkgoldenrod"],labelMarker="red",labelMarkerActive="firebrick",labelMarkerZero="darkgray",labelMarkerZeroActive="#808080",activeColorPlaceName="#F44336",GMap={_Extend:function(e){GMap.elementSelector=e.elementSelector,GMap.mapChangeCallBack=e.mapChangeCallBack,GMap.showPropertyWidgetCallback=e.showPropertyWidgetCallback,GMap.InfoBoxShowCallBack=e.infoBoxShowCallBack||function(){},GMap.deaultLatLng=e.deaultLatLng,GMap.mainPropertyId=e.mainPropertyId,GMap.mainPropertyIcon=e.mainPropertyIcon,GMap.scrollwheel=e.scrollwheel,GMap.defaultZoom=e.defaultZoom,GMap.RefreshCount=0,GMap.minZoom=e.minZoom||5,GMap.DocIds=[],GMap.PlaceNameIds=[],GMap.Markers=[],GMap.PlaceNameMarkers=[],GMap.IsLoading=!0,GMap.IsLoaded=!1,GMap.MetaDataType={PROPERTY:0,LOCALITY:1,ADMIN_LV2:2,ADMIN_LV1:3,PLACE_NEARBY:4};var a={content:"",disableAutoPan:!1,maxWidth:288,alignBottom:!1,pixelOffset:new google.maps.Size(29,(-29)),zIndex:null,boxStyle:{opacity:1,zIndex:999,width:"288px"},closeBoxMargin:"5px 5px",closeBoxURL:"data:image/gif;base64,R0lGODlhDgANAIAAAP///6CgpCH5BAAAAAAALAAAAAAOAA0AAAIfjI8Jy73mIoAzNErrs/se72Qdg4BjhnGnKo3tlsRGAQA7",infoBoxClearance:new google.maps.Size(1,1)};GMap.InfoBoxMouseOver=new InfoBox(a),GMap.InfoBoxPlaceNameMouseOver=new InfoBox(a),GMap.InfoBoxMouseOver.addListener("closeclick",function(){if(GMap.ActiveMarker){var e=GMap.ActiveMarker;GMap.ActiveMarker=null,e&&google.maps.event.trigger(e,"mouseout")}GMap.InfoBoxMouseOver.close()}),GMap.InfoBoxMouseClick=new InfoBox(a),GMap.InfoBoxMouseClick.addListener("closeclick",function(){if(GMap.ActiveMarker){var e=GMap.ActiveMarker;GMap.ActiveMarker=null,e&&google.maps.event.trigger(e,"mouseout")}GMap.InfoBoxMouseClick.close()}),GMap.InfoBoxPlaceNameMouseClick=new InfoBox(a),
GMap.InfoBoxPlaceNameMouseClick.addListener("closeclick",function(){if(GMap.ActivePlaceNameMarker){var e=GMap.ActivePlaceNameMarker;GMap.ActivePlaceNameMarker=null,e&&google.maps.event.trigger(e,"mouseout")}GMap.InfoBoxPlaceNameMouseClick.close()});var t=document.querySelector(GMap.elementSelector);GMap.Map=new google.maps.Map(t,{center:GMap.deaultLatLng||new google.maps.LatLng(10.823099,106.629664),zoom:GMap.defaultZoom,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,zoomControl:!1,panControl:!1,scaleControl:!1,streetViewControl:!0,scrollwheel:GMap.scrollwheel,gestureHandling:"greedy",minZoom:GMap.minZoom}),GMap.GmapControl=GmapControl.Init(GMap,e.userGeoSelector,e.zoomInSelector,e.zoomOutSelector,e.selectMapTypeSelector,e.selectMapTypeClass)},LoadMap:function(){GMap.IsLoading=!0,GMap.Map.addListener("idle",function(){GMap.IsLoaded=!0,GMap.IsLoading=!1,GMap.RefreshCount++,GMap.mapChangeCallBack&&GMap.mapChangeCallBack(GMap.Map.getBounds(),GMap.Map.getZoom())}),GMap.Map.addListener("zoom_changed",function(){})},ClearMarker:function(e){if(!(GMap.Markers.length>0&&GMap.Markers[0].metaDataType!==e)){null!=GMap.ActiveMarker&&GMap.ActiveMarker.metaDataType===e&&(google.maps.event.trigger(GMap.InfoBoxMouseOver,"closeclick"),google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"));for(var a=0;a<GMap.Markers.length;a++)GMap.Markers[a].setMap(null);if(GMap.Markers=[],GMap.DocIds=[],e===GMap.MetaDataType.PLACE_NEARBY)for(var t=0;t<GMap.PlaceNameMarkers.length;t++)GMap.Markers[t].setVisible(!1)}},SetVisiblePlaceNameMarkers:function(e){e||(google.maps.event.trigger(GMap.InfoBoxPlaceNameMouseOver,"closeclick"),google.maps.event.trigger(GMap.InfoBoxPlaceNameMouseClick,"closeclick"));for(var a=0;a<GMap.PlaceNameMarkers.length;a++)GMap.PlaceNameMarkers[a].setVisible(e)},AddSpecialMarker:function(e,a,t,o,n,i){var r={anchor:new google.maps.Point(o,n),url:e},l=new google.maps.Marker({position:{lat:a,lng:t},draggable:!1,optimized:!1,icon:r,zIndex:i,animation:google.maps.Animation.DROP});return l.setMap(GMap.Map),l},AddPropertyMarker:function(e){for(var a=0;a<e.length;a++)if(GMap.DocIds.indexOf(e[a].id)<0){GMap.DocIds.push(e[a].id);var t=GMap._DrawPropertyMarker(e[a]);GMap.Markers.push(t),GMap._BindingPropertyEventMarker(t)}},AddPlaceNameMarkers:function(e){for(var a=0;a<e.length;a++)if(GMap.PlaceNameIds.indexOf(e[a].id)<0){GMap.PlaceNameIds.push(e[a].id);var t=GMap._DrawPlaceMarker(e[a]);GMap.PlaceNameMarkers.push(t),GMap._BindingPlaceNameEventMarker(t)}},AddLocalityMarker:function(e){for(var a=e.length,t=0;t<a;t++)if(GMap.DocIds.indexOf(e[t].id)<0){GMap.DocIds.push(e[t].id);var o=GMap._DrawLocalityMarker(e[t],t+10*e[t].propertiesCount*a);GMap.Markers.push(o),GMap._BindingLabelEventMarker(o)}},AddAdminLevel2Marker:function(e){for(var a=e.length,t=0;t<a;t++)if(GMap.DocIds.indexOf(e[t].id)<0){GMap.DocIds.push(e[t].id);var o=GMap._DrawAdminLevel2Marker(e[t],t+e[t].propertiesCount*a);GMap.Markers.push(o),GMap._BindingLabelEventMarker(o)}},AddAdminLevel1Marker:function(e){for(var a=e.length,t=0;t<a;t++)if(GMap.DocIds.indexOf(e[t].id)<0){GMap.DocIds.push(e[t].id);var o=GMap._DrawAdminLevel1Marker(e[t],t+10*e[t].propertiesCount*a);GMap.Markers.push(o),GMap._BindingLabelEventMarker(o)}},GetMarkerByPropId:function(e){for(var a=0;a<GMap.Markers.length;a++){if(GMap.Markers[a].metaDataType!==GMap.MetaDataType.PROPERTY)return null;var t=GMap.Markers[a].metaData;if(t.id===e)return GMap.Markers[a]}return null},GetMarkerByPlaceNameId:function(e){for(var a=0;a<GMap.PlaceNameMarkers.length;a++){if(GMap.PlaceNameMarkers[a].metaDataType!==GMap.MetaDataType.PLACE_NEARBY)return null;var t=GMap.PlaceNameMarkers[a].metaData;if(t.id===e)return GMap.PlaceNameMarkers[a]}return null},_DrawPlaceMarker:function(e){var a=GMap._ConvertDocPlaceNameMarker(e);return a.setMap(GMap.Map),a},_DrawPropertyMarker:function(e){var a=GMap._ConvertDocPropToPropertyMarker(e);return a.setMap(GMap.Map),a},_DrawLocalityMarker:function(e,a){var t=GMap._ConvertObjectToLabelMarker(e,a,GMap.MetaDataType.LOCALITY);return t.setMap(GMap.Map),t},_DrawAdminLevel2Marker:function(e,a){var t=GMap._ConvertObjectToLabelMarker(e,a,GMap.MetaDataType.ADMIN_LV2);return t.setMap(GMap.Map),t},_DrawAdminLevel1Marker:function(e,a){var t=GMap._ConvertObjectToLabelMarker(e,a,GMap.MetaDataType.ADMIN_LV1);return t.setMap(GMap.Map),t},_ConvertDocPropToPropertyMarker:function(e){var a;return e.id===+GMap.mainPropertyId?a=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,optimized:!1,icon:GMap.mainPropertyIcon,zIndex:10*e.id,animation:google.maps.Animation.DROP,metaData:e,metaDataType:GMap.MetaDataType.PROPERTY}):(a=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,zIndex:e.id,animation:google.maps.Animation.DROP,label:{color:"white",fontSize:"12px",fontWeight:"700",text:e.price.ToMoney()},icon:{path:"M45.5,0h-43C1.1,0,0,1.1,0,2.5v12C0,15.9,1.1,17,2.5,17h19.1l3.3,4l3.3-3.9l17.2,0c1.4,0,2.5-1.1,2.5-2.5V2.5 C48,1.1,46.9,0,45.5,0z",fillColor:markerColor[e.propertyType],fillOpacity:1,anchor:new google.maps.Point(24,21),strokeWeight:0,scale:1,labelOrigin:new google.maps.Point(24,9),position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude}},metaData:e,metaDataType:GMap.MetaDataType.PROPERTY}),e.propertyType<=3||e.propertyType<=8||e.propertyType<=12),a},_ConvertDocPlaceNameMarker:function(e){var a={anchor:new google.maps.Point(12,29),url:"data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}","#696969").replace("{{COLOR}}","#696969").replace("{{LABEL}}",e.labelName?e.labelName:"?")},t=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,optimized:!1,icon:a,zIndex:1,metaData:e,animation:google.maps.Animation.DROP,metaDataType:GMap.MetaDataType.PLACE_NEARBY});return t.setMap(GMap.Map),t},_ConvertObjectToLabelMarker:function(e,a,t){var o='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="32"><path fill="#b27214" d="M21.3.2h2V32h-2z"/><path fill="#995c0d" d="M20 .2V32h1.6V20h1.7v-2.4h-1.7V.2z"/><path fill="{{background}}" stroke="#fff" stroke-width="5.5" d="M39.5 260L0 210l39.5-50.3h214.7V260H182z" transform="matrix(.15358 0 0 .13873 .538 -17.76)"/></svg>',n={anchor:new google.maps.Point(21.3,32),labelOrigin:new google.maps.Point(21.3,12),url:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o.replace("{{background}}",0===e.propertiesCount?labelMarkerZero:labelMarker))},i=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,icon:n,label:{color:"white",fontSize:"11px",fontWeight:"700",text:0===e.propertiesCount?"SALE":WNumbHelper.GetFrNumber(e.propertiesCount)},zIndex:a,animation:google.maps.Animation.DROP,metaData:e,metaDataType:t});return i},_ConvertObjectToAdminLevel2Marker:function(e,a){var t={anchor:new google.maps.Point(12,24),url:0===e.curentPropertiesCount?"/images/shared/map/LocalityMarker0.png":"/images/shared/map/LocalityMarker.png"},o=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,icon:t,zIndex:a,animation:google.maps.Animation.DROP,metaData:e,metaDataType:GMap.MetaDataType.ADMIN_LV2});return o},_ConvertObjectToAdminLevel1Marker:function(e,a){var t={anchor:new google.maps.Point(12,24),url:0===e.curentPropertiesCount?"/images/shared/map/LocalityMarker0.png":"/images/shared/map/LocalityMarker.png"},o=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,icon:t,zIndex:a,animation:google.maps.Animation.DROP,metaData:e,metaDataType:GMap.MetaDataType.ADMIN_LV1});return o},_GetHoverContent:function(e,a){var t,o;if(a===GMap.MetaDataType.PLACE_NEARBY){o=document.createElement("div");var n='<div id="infobox0" class="hover"> <div> <h4 class="text-strong text-14 _text-ellipsis _p-text-header text-white text-uppercase fill-info">'+e.title+'</h4> </div><div class="cf _p-div1"> <div class="text-16 padding-right-5 _rating"> <b>'+e.locationName+'</b> <div class="star-rating padding-v-5"> <div class="star-rating__wrap"> <label class="star-rating__ico fa fa-star-o fa-lg" data-checked5 data-rate="5" title="5/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg" data-checked4 data-rate="4" title="4/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg" data-checked3 data-rate="3" title="3/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg"  data-checked2 data-rate="2" title="2/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg"  data-checked1 data-rate="1" title="1/5 stars"></label> </div></div></div><p class="_text-ellipsis">'+e.simpleAddress+"</p></div></div>",i=Math.round(NumberHelper.ToDouble(e.rating));return n=n.replace("data-checked"+i,"data-check"),o.innerHTML=n,o}var r;if(a===GMap.MetaDataType.PROPERTY){t=markerColor[e.propertyType];var l=e.propertyTypeName;r=e.simpleAddress;var s=e.landSize?"Diện tích: <b>"+WNumbHelper.GetSizem(e.landSize)+"</b>":"Diện tích: NaN",p=e.room?e.room+" phòng":"",d=e.bath?e.bath+" phòng tắm":"",c=e.bed?e.bed+" phòng ngủ":"",u=WNumbHelper.GetPrice(e.price,!1),g=WNumbHelper.GetPricePerm(e.price,e.landSize),m=g?"<span class='label border red text-lowercase'>"+g+"</span>":"",v=[s,p,c,d].JoinNotNull(", ");return o=document.createElement("div"),o.innerHTML="<div id='infobox"+a+"' class='hover'><h4 class='text-strong text-14 _text-ellipsis _p-text-header text-white text-uppercase' style='background-color:"+t+"'>"+l+"</h4><div class='cf _p-div1'><b class='_color-text-blue text-14 text-strong padding-right-5'> "+u+"</b>"+m+"<p class='_text-ellipsis'>"+r+"</p></div><div class='cf _p-hover-footer'><p class='_text-ellipsis'>"+v+"</p></div></div>",o}t=e.propertiesCount?labelMarkerActive:labelMarkerZeroActive;var M=e.placeName;r=e.simpleAddress;var h=e.propertiesCount?"<b>"+e.propertiesCount.ToFrDouble()+"</b>":"<span class='text-gray'>NaN</span>",f=e.avgPriceLvMonth&&0!==e.avgPriceLvMonth?"<b>"+WNumbHelper.GetPrice(e.avgPriceLvMonth,!0)+"/m<sup>2</sup></b>":"<span class='text-gray'>NaN</span>",P=e.minPrice&&0!==e.minPrice?"<b>"+WNumbHelper.GetPrice(e.minPrice,!1)+"</b>":"<span class='text-gray'>NaN</span>",y=e.curentPropertiesCount?"<b>"+e.curentPropertiesCount.ToFrDouble()+"</b>":"<span class='text-gray'>NaN</span>",x=e.avgPrice&&0!==e.avgPrice?"<b>"+WNumbHelper.GetPrice(e.avgPrice,!0)+"/m<sup>2</sup></b>":"<span class='text-gray'>NaN</span>",b=e.maxPrice&&0!==e.maxPrice?"<b>"+WNumbHelper.GetPrice(e.maxPrice,!1)+"/m<sup>2</sup></b>":"<span class='text-gray'>NaN</span>",L=SeoUrl.PlaceDetailUrl("ban-dia-oc",e.simpleAddress,e.id),k=SeoUrl.MapSearchUrl("ban-dia-oc",e.simpleAddress,e.id);return o=document.createElement("div"),o.innerHTML="<div id='infobox"+a+"' class='hover'><h4 class='text-strong text-center text-14 _text-ellipsis _p-text-header text-white text-uppercase' style='background-color:"+t+"'>"+M+"</h4> <div class='cf _p-div1 row'> <b class='_color-text-blue block text-14 text-strong padding-right-5 _text-ellipsis'>"+r+"</b> <div class='row tablet-col-2 padding-v-5'> <div class='col-6'> <ul class='circle pull-left'> <li>Số địa ốc: "+h+"</li><li>Giá TB<sup class='_require hidden _max-width-0'>*</sup>: "+f+"</li><li>Min<sup class='_require'>*</sup>: "+P+"</li></ul></div><div class='col-6'><ul class='circle pull-left'> <li>Số địa ốc<sup class='_require'>*</sup>: "+y+"</li><li>Giá TB<sup class='_require'>*</sup>: "+x+"</li><li>Max<sup class='_require'>*</sup>: "+b+"</li></ul></div><div class='col-12'> <small><sup class='_require'>*</sup>: Tính trong tháng hiện tại</small> </div></div></div><div class='cf fill-light-silver padding-5'> <a class='btn s info' href='"+L+"'>Xem phân tích</a> <a class='btn s warning' href='"+k+"'>Xem danh sách địa ốc</a></div></div>",o},_GetClickContent:function(e,a){if(a===GMap.MetaDataType.PROPERTY){var t=this,o=new FormData;o.append("PropertyId",e.id),o.append("mapSearchListType","Widget");var n="//"+document.location.host+"/PublicProperty/GetPropertyWidget";AjaxRequest.SendFormData("POST",n,o,function(e){var a=Site.HtmlToElement(e);if(null!=a[0]&&a[0].dataset.propId){var o=document.getElementById("infoboxPropertyActive"+a[0].dataset.propId);o&&(o.innerHTML=e,Site&&(Site.BeLazyRevalidate(),Site.MomentTime(),t.InfoBoxShowCallBack(+a[0].dataset.propId)))}},function(e){Site.Notify("LỖI","Lấy thông tin địa ốc thất bại"+e,"error")});var i=document.createElement("div");return i.innerHTML="<div class='_p-PropertyWidgetMapSearch active cf' id='infobox"+a+"'><div id='infoboxPropertyActive"+e.id+"' class='_p-facebook-loading'><div class='relative _property-item border-1 border-silver solid cf center'><div class='_p-ani _p-pic'></div><div class='padding cf'><div class='_p-sec2-row1'></div><div class='_p-sec2-row2'></div><div class='_p-sec2-row3'></div></div><div class='row padding-v border border-top border-1 solid cf'><div class='padding-left col-4 mobile-col-persist'><div class='_p-sec3-row1'></div><div class='_p-sec3-row2'></div><div class='_p-sec3-row3'></div><div class='_p-sec3-row4'></div></div><div class='col-8 _p-widget-button mobile-col-persist'><div class='row'><div class='col-7 _text-sm mobile-col-persist'><div class='_p-sec3-row5'></div><div class='_p-sec3-row6'></div></div><div class='col-5 mobile-col-persist pull-right padding-right'><div class='_p-sec3-row7'></div></div></div><div class='row _p-btn-group text-right'> <span class='btn s _p-sec3-row8'></span> <span class='btn s _p-sec3-row9'></span></div></div></div></div></div></div>",i}return"<p class='danger'>NOT FOUND CONTENT</p>"},_BindingPlaceNameEventMarker:function(e){e.addListener("mouseover",function(){if(null==GMap.ActivePlaceNameMarker||GMap.ActivePlaceNameMarker!==this){this.setZIndex(this.getZIndex()+1e5);var e=this.getIcon();e.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}",activeColorPlaceName).replace("{{COLOR}}",activeColorPlaceName).replace("{{LABEL}}",this.metaData.labelName?this.metaData.labelName:"?"),this.setIcon(e),GMap.InfoBoxPlaceNameMouseOver.close(),GMap.InfoBoxPlaceNameMouseOver.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxPlaceNameMouseOver.open(GMap.Map,this)}}),e.addListener("mouseout",function(){if(null==GMap.ActivePlaceNameMarker||GMap.ActivePlaceNameMarker!==this){this.setZIndex(this.getZIndex()-1e5);var e=this.getIcon();e.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}","#696969").replace("{{COLOR}}","#696969").replace("{{LABEL}}",this.metaData.labelName?this.metaData.labelName:"?"),this.setIcon(e),GMap.InfoBoxPlaceNameMouseOver.close()}}),e.addListener("click",function(){if(null==GMap.ActivePlaceNameMarker||GMap.ActivePlaceNameMarker!==this){if(GMap.InfoBoxPlaceNameMouseOver.close(),null!=GMap.ActivePlaceNameMarker){GMap.ActivePlaceNameMarker.setZIndex(GMap.ActivePlaceNameMarker.getZIndex()-1e5);var e=GMap.ActivePlaceNameMarker.getIcon();e.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}","#696969").replace("{{COLOR}}","#696969").replace("{{LABEL}}",GMap.ActivePlaceNameMarker.metaData.labelName?GMap.ActivePlaceNameMarker.metaData.labelName:"?"),GMap.ActivePlaceNameMarker.setIcon(e)}GMap.ActivePlaceNameMarker=this,this.setZIndex(this.getZIndex()+1e5);var a=this.getIcon();a.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}",activeColorPlaceName).replace("{{COLOR}}",activeColorPlaceName).replace("{{LABEL}}",this.metaData.labelName?this.metaData.labelName:"?"),this.setIcon(a),GMap.InfoBoxPlaceNameMouseClick.close(),GMap.InfoBoxPlaceNameMouseClick.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxPlaceNameMouseClick.open(GMap.Map,this)}})},_BindingPropertyEventMarker:function(e){e.addListener("mouseover",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){this.setZIndex(this.getZIndex()+1e5);var e=this.icon;e.fillColor=markerActiveColor[this.metaData.propertyType],this.setIcon(e),GMap.InfoBoxMouseOver.close(),GMap.InfoBoxMouseOver.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseOver.open(GMap.Map,this)}}),e.addListener("mouseout",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){this.setZIndex(this.getZIndex()-1e5);var e=this.icon;e.fillColor=markerColor[this.metaData.propertyType],this.setIcon(e),GMap.InfoBoxMouseOver.close()}}),e.addListener("click",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){if(GMap.InfoBoxMouseOver.close(),null!=GMap.ActiveMarker){GMap.ActiveMarker.setZIndex(GMap.ActiveMarker.getZIndex()-1e5);var e=GMap.ActiveMarker.icon;e.fillColor=markerColor[GMap.ActiveMarker.metaData.propertyType],GMap.ActiveMarker.setIcon(e)}this.setZIndex(this.getZIndex()+1e5);var a=this.icon;a.fillColor=markerActiveColor[this.metaData.propertyType],this.setIcon(a),GMap.ActiveMarker=this,GMap.InfoBoxMouseClick.setContent(GMap._GetClickContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseClick.close(),GMap.InfoBoxMouseClick.open(GMap.Map,this),CookieHelper.ViewPropertyId(this.metaData.id),GMap.showPropertyWidgetCallback&&"function"==typeof GMap.showPropertyWidgetCallback&&GMap.showPropertyWidgetCallback(this.metaData.id)}})},_BindingLabelEventMarker:function(e){e.addListener("mouseover",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){var e=GMap.ActiveMarker;GMap.ActiveMarker=null,e&&google.maps.event.trigger(e,"mouseout"),this.setZIndex(this.getZIndex()+1e5);var a=this.icon;a.url=a.url.replace(encodeURIComponent(labelMarker),encodeURIComponent(labelMarkerActive)).replace(encodeURIComponent(labelMarkerZero),encodeURIComponent(labelMarkerZeroActive)),this.setIcon(a),GMap.InfoBoxMouseOver.close(),GMap.InfoBoxMouseOver.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseOver.open(GMap.Map,this)}}),e.addListener("mouseout",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){this.setZIndex(this.getZIndex()-1e5);var e=this.icon;e.url=e.url.replace(encodeURIComponent(labelMarkerActive),encodeURIComponent(labelMarker)).replace(encodeURIComponent(labelMarkerZeroActive),encodeURIComponent(labelMarkerZero)),this.setIcon(e),GMap.InfoBoxMouseOver.close()}}),e.addListener("click",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){if(GMap.InfoBoxMouseOver.close(),null!=GMap.ActiveMarker){GMap.ActiveMarker.setZIndex(GMap.ActiveMarker.getZIndex()-1e5);var e=this.icon;e.url=e.url.replace(encodeURIComponent(labelMarker),encodeURIComponent(labelMarkerActive)).replace(encodeURIComponent(labelMarkerZero),encodeURIComponent(labelMarkerZeroActive)),this.setIcon(e)}this.setZIndex(this.getZIndex()+1e5);var a=this.icon;a.url=a.url.replace(encodeURIComponent(labelMarker),encodeURIComponent(labelMarkerActive)).replace(encodeURIComponent(labelMarkerZero),encodeURIComponent(labelMarkerZeroActive)),this.setIcon(a),GMap.ActiveMarker=this,GMap.InfoBoxMouseClick.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseClick.close(),GMap.InfoBoxMouseClick.open(GMap.Map,this)}})},Init:function(e){LoadInfoBoxPrototype(),GMap._Extend(e),sellMarker={path:"M45.5,0h-43C1.1,0,0,1.1,0,2.5v12C0,15.9,1.1,17,2.5,17h19.1l3.3,4l3.3-3.9l17.2,0c1.4,0,2.5-1.1,2.5-2.5V2.5 C48,1.1,46.9,0,45.5,0z",fillColor:"#FF0000",fillOpacity:.9,anchor:new google.maps.Point(0,0),strokeWeight:0,label:{color:"",fontFamily:"",fontSize:"",fontWeight:"",text:""},scale:1,zIndex:-20,position:new google.maps.LatLng((-34),151)},rentMarker={path:"M56.525,24.533c0-13.548-10.982-24.528-24.529-24.528c-13.356,0-24.2,10.683-24.501,23.968  c-0.009-0.004-0.02-0.004-0.028-0.004c-0.006,0.12,0.013,0.241,0.01,0.362c-0.001,0.067-0.01,0.135-0.01,0.202  c0,0.244,0.03,0.479,0.037,0.72C7.78,41.191,25.795,58.009,31.996,63.995c17.415-14.119,22.485-27.216,23.95-34.199  c0.053-0.245,0.1-0.489,0.145-0.734c0.141-0.752,0.239-1.426,0.307-2.004c0-0.007,0.002-0.014,0.002-0.021  C56.583,25.423,56.525,24.533,56.525,24.533z",fillColor:"#FF0000",fillOpacity:.8,anchor:new google.maps.Point(0,0),strokeWeight:0,label:{color:"",fontFamily:"",fontSize:"",fontWeight:"",text:""},scale:1,zIndex:-20,position:new google.maps.LatLng((-34),151)}}},GmapControl={_Extend:function(e,a,t,o,n,i){GmapControl.MapStyle={ROADMAP:google.maps.MapTypeId.ROADMAP,TERRAIN:google.maps.MapTypeId.TERRAIN,SATELLITE:google.maps.MapTypeId.SATELLITE},GmapControl.ZoomInEle=document.querySelector(t),GmapControl.ZoomOutEle=document.querySelector(o),GmapControl.UserGeo=document.querySelector(a),GmapControl.GMap=e,GmapControl.UserGeoMarker=null;var r=document.createElement("select");r.className=i;var l=document.createElement("option"),s=document.createElement("option"),p=document.createElement("option");l.text="BẢN ĐỒ",l.value=google.maps.MapTypeId.ROADMAP,l.selected=!0,s.text="ĐỊA LÝ",s.value=google.maps.MapTypeId.TERRAIN,p.text="VỆ TINH",p.value=google.maps.MapTypeId.HYBRID,r.add(l),r.add(s),r.add(p);var d=document.querySelector(n);d&&(d.appendChild(r),GmapControl.SelectMapType=r),google.maps.event.addDomListener(GmapControl.UserGeo,"click",function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){GmapControl.GMap.Map.panTo({lat:e.coords.latitude,lng:e.coords.longitude}),GmapControl.UserGeoMarker&&GmapControl.UserGeoMarker.setMap(null),GmapControl.UserGeoMarker=GmapControl.GMap.AddSpecialMarker("/images/shared/map/userSvg.svg",e.coords.latitude,e.coords.longitude,22,50,99999999999)}):alert("Không thể lấy vị trí hiện tại của bạn")}),google.maps.event.addDomListener(GmapControl.ZoomInEle,"click",function(){GmapControl.GMap.Map.setZoom(GmapControl.GMap.Map.getZoom()+1)}),google.maps.event.addDomListener(GmapControl.ZoomOutEle,"click",function(){GmapControl.GMap.Map.setZoom(GmapControl.GMap.Map.getZoom()-1)}),google.maps.event.addDomListener(GmapControl.SelectMapType,"change",function(e){GmapControl.GMap.Map.setMapTypeId(e.currentTarget.value)})},Init:function(e,a,t,o,n,i){return null!=e?(GmapControl._Extend(e,a,t,o,n,i),GmapControl):null}},swiperAgent=null;document.addEventListener("DOMContentLoaded",function(){}),document.addEventListener("DOMContentLoaded",function(){Site.MomentTime()});var markPlaceAddress,frmAdvanceSearch,rangePriceLabel,rangeRoomLabel,rangeSizeLabel,userInput,fuzzyComplete;document.addEventListener("DOMContentLoaded",function(){InitControls(),InitSlider(),InitComboboxSearchType(),InnitElasticSearch(),BindingEvent()});var showSavedProperty=document.querySelector("[data-target-model='#savedModel']"),showViewedProperty=document.querySelector("[data-target-model='#viewedModel']"),savedPropertiesNumber=document.getElementById("savedPropertiesNumber"),viewedPropertiesNumber=document.getElementById("viewedPropertiesNumber");document.addEventListener("DOMContentLoaded",function(){showSavedProperty.addEventListener("click",ReloadSavedForm),showViewedProperty.addEventListener("click",ReloadViewedForm)});var disableLoadingMap=!1,loadingMapAnimation=document.querySelector("._p-loading"),activeProp=null;document.addEventListener("DOMContentLoaded",function(){Site.BindingSelectAutoSubmit();var e=document.getElementsByTagName("head")[0],a=e.insertBefore;e.insertBefore=function(t,o){(!t.href||0!==t.href.indexOf("https://fonts.googleapis.com")&&0!==t.href.indexOf("http://fonts.googleapis.com"))&&a.call(e,t,o)}});