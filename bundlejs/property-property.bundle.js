"use strict";function InfoBox(e){e=e||{},google.maps.OverlayView.apply(this,arguments),this.content_=e.content||"",this.disableAutoPan_=e.disableAutoPan||!1,this.maxWidth_=e.maxWidth||0,this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0),this.position_=e.position||new google.maps.LatLng(0,0),this.zIndex_=e.zIndex||null,this.boxClass_=e.boxClass||"infoBox",this.boxStyle_=e.boxStyle||{},this.closeBoxMargin_=e.closeBoxMargin||"2px",this.closeBoxURL_=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===e.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1),this.isHidden_=e.isHidden||!1,this.alignBottom_=e.alignBottom||!1,this.pane_=e.pane||"floatPane",this.enableEventPropagation_=e.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function LoadInfoBoxPrototype(){InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var e,t,a,o=this,n=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},i=function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),o.enableEventPropagation_||n(e)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(a=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-a.left-a.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],t=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],e=0;e<t.length;e++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,t[e],n));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",i),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var e="";return""!==this.closeBoxURL_&&(e="<img",e+=" src='"+this.closeBoxURL_+"'",e+=" align=right",e+=" style='",e+=" position: absolute;",e+=" cursor: pointer;right: 0;",e+=" margin: "+this.closeBoxMargin_+";",e+="'>"),e},InfoBox.prototype.addClickHandler_=function(){var e;""!==this.closeBoxURL_?(e=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var e=this;return function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),google.maps.event.trigger(e,"closeclick"),e.close()}},InfoBox.prototype.panBox_=function(e){var t,a,o=0,n=0;if(!e&&(t=this.getMap(),t instanceof google.maps.Map)){t.getBounds().contains(this.position_)||t.setCenter(this.position_),a=t.getBounds();var i=t.getDiv(),r=i.offsetWidth,l=i.offsetHeight,s=this.pixelOffset_.width,d=this.pixelOffset_.height,c=this.div_.offsetWidth,p=this.div_.offsetHeight,u=this.infoBoxClearance_.width,m=this.infoBoxClearance_.height,g=this.getProjection().fromLatLngToContainerPixel(this.position_);g.x<-s+u?o=g.x+s-u:g.x+c+s+u>r&&(o=g.x+c+s+u-r),this.alignBottom_?g.y<-d+m+p?n=g.y+d-m-p:g.y+d+m>l&&(n=g.y+d+m-l):g.y<-d+m?n=g.y+d-m:g.y+p+d+m>l&&(n=g.y+p+d+m-l),0===o&&0===n||t.panBy(o,n)}},InfoBox.prototype.setBoxStyle_=function(){var e,t;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",t=this.boxStyle_;for(e in t)t.hasOwnProperty(e)&&(this.div_.style[e]=t[e]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var e,t={top:0,bottom:0,left:0,right:0},a=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(e=a.ownerDocument.defaultView.getComputedStyle(a,""),e&&(t.top=parseInt(e.borderTopWidth,10)||0,t.bottom=parseInt(e.borderBottomWidth,10)||0,t.left=parseInt(e.borderLeftWidth,10)||0,t.right=parseInt(e.borderRightWidth,10)||0)):document.documentElement.currentStyle&&a.currentStyle&&(t.top=parseInt(a.currentStyle.borderTopWidth,10)||0,t.bottom=parseInt(a.currentStyle.borderBottomWidth,10)||0,t.left=parseInt(a.currentStyle.borderLeftWidth,10)||0,t.right=parseInt(a.currentStyle.borderRightWidth,10)||0),t},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px":this.div_.style.top=e.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(e){"undefined"!=typeof e.boxClass&&(this.boxClass_=e.boxClass,this.setBoxStyle_()),"undefined"!=typeof e.boxStyle&&(this.boxStyle_=e.boxStyle,this.setBoxStyle_()),"undefined"!=typeof e.content&&this.setContent(e.content),"undefined"!=typeof e.disableAutoPan&&(this.disableAutoPan_=e.disableAutoPan),"undefined"!=typeof e.maxWidth&&(this.maxWidth_=e.maxWidth),"undefined"!=typeof e.pixelOffset&&(this.pixelOffset_=e.pixelOffset),"undefined"!=typeof e.alignBottom&&(this.alignBottom_=e.alignBottom),"undefined"!=typeof e.position&&this.setPosition(e.position),"undefined"!=typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!=typeof e.closeBoxMargin&&(this.closeBoxMargin_=e.closeBoxMargin),"undefined"!=typeof e.closeBoxURL&&(this.closeBoxURL_=e.closeBoxURL),"undefined"!=typeof e.infoBoxClearance&&(this.infoBoxClearance_=e.infoBoxClearance),"undefined"!=typeof e.isHidden&&(this.isHidden_=e.isHidden),"undefined"!=typeof e.enableEventPropagation&&(this.enableEventPropagation_=e.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(e){this.content_=e,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(e){this.position_=e,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(e){this.zIndex_=e,this.div_&&(this.div_.style.zIndex=e),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(e,t){var a=this;t&&(this.position_=t.getPosition(),this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){a.setPosition(this.getPosition())})),this.setMap(e),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var e;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(e=0;e<this.eventListeners_.length;e++)google.maps.event.removeListener(this.eventListeners_[e]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)}}function LoadSwiperDefault(){if(galleryTop=new Swiper(".gallery-top",{spaceBetween:20,preloadImages:!1,lazy:!0,pagination:".swiper-pagination",paginationType:"fraction",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),galleryThumbs=new Swiper(".gallery-thumbs",{spaceBetween:5,centeredSlides:!0,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0}),galleryThumbs instanceof Array)for(var e=0;e<galleryThumbs.length;e++)galleryThumbs[e].imagesToLoad.length>0&&(galleryTop[e].controller.control=galleryThumbs,galleryThumbs[e].controller.control=galleryTop);else galleryTop.controller.control=galleryThumbs,galleryThumbs.controller.control=galleryTop;var t=document.querySelector("._p-show-photowipe");t.addEventListener("click",function(e){var t=galleryTop.activeIndex;_LoadImageSwipe(e.target.dataset.selector,t)})}function _LoadImageSwipe(e,t){var a,o=document.querySelectorAll(".pswp")[0],n=document.querySelector(e),i=[],r=document.querySelectorAll(e+" .swiper-slide .hide"),l=document.querySelectorAll(e+" .swiper-slide ._p-slide-image"),s=document.querySelector(e+" .swiper-slide-active");s||console.warn("ko có thumb dùng top gallery");for(var d=0;d<r.length;d++)a={src:l[d].src||l[d].dataset.src,w:l[d].width,h:l[d].height,author:n.dataset.author},a.msrc=s.getAttribute("src"),a.el=s,a.title=n.dataset.seo,a.m={src:r[d].src||l[d].dataset.src,w:r[d].width,h:r[d].height,author:n.dataset.author},a.o={src:r[d].src||r[d].dataset.src,w:r[d].width,h:r[d].height,author:n.dataset.author},i.push(a);var c,p,u={index:t,history:!1,focus:!1,hideAnimationDuration:0,getThumbBoundsFn:function(e){var t=i[e].el.children[0],a=window.pageYOffset||document.documentElement.scrollTop,o=t.getBoundingClientRect();return{x:o.left,y:o.top+a,w:o.width}},galleryUID:e},m=new PhotoSwipe(o,PhotoSwipeUI_Default,i,u),g=!1,M=!0;m.listen("beforeResize",function(){var e=window.devicePixelRatio?window.devicePixelRatio:1;e=Math.min(e,2.5),c=m.viewportSize.x*e,c>=1200||!m.likelyTouchDevice&&c>800||screen.width>1200?g||(g=!0,p=!0,console.log(screen.width+"use largeImage")):g&&(g=!1,p=!0,console.log(screen.width+"not use largeImage")),p&&!M&&m.invalidateCurrItems(),M&&(M=!1),p=!1}),m.listen("gettingData",function(e,t){g?(t.src=t.o.src,t.w=t.o.w,t.h=t.o.h):(t.src=t.m.src,t.w=t.m.w,t.h=t.m.h)}),m.init()}function ReBindingView(){Site.ReValidateForm(document.querySelectorAll("[data-form-submit-lead]")),LoadCleave(),LoadSwiperAgent(),AddEventDropdownList()}function AddEventDropdownList(){var e=document.querySelector("[name='LeadDataModel.RoomMin']"),t=document.querySelector("[name='LeadDataModel.RoomMax']");UpdateEventCuple(e,t);var a=document.querySelector("[name='LeadDataModel.RoadMin']"),o=document.querySelector("[name='LeadDataModel.RoadMax']");UpdateEventCuple(a,o);var n=document.querySelector("[name='LeadDataModel.SizeMin']"),i=document.querySelector("[name='LeadDataModel.SizeMax']");UpdateEventCuple(n,i);var r=document.querySelector("[name='LeadDataModel.PriceMin']"),l=document.querySelector("[name='LeadDataModel.PriceMax']");UpdateEventCuple(r,l)}function UpdateEventCuple(e,t){e&&t&&e.addEventListener("change",function(e){for(var a=+e.target.value,o=t.querySelectorAll("option"),n=0;n<o.length;n++)+o[n].value<a?o[n].setAttribute("disabled",""):o[n].removeAttribute("disabled");a>t.value&&(t.selectedIndex=0)})}function LoadSwiperAgent(){var e=document.querySelector("._p-SliderAgentContactForm .swiper-container");e&&(swiperAgent=new Swiper(e,{paginationType:"fraction",effect:"flip",initialSlide:+e.dataset.activeSlide,grabCursor:!0,loop:!0,navigation:{nextEl:".fa-angle-left",prevEl:".fa-angle-right"},pagination:{el:"._p-paging"}}),swiperAgent.on("slideChange",function(){var e=swiperAgent.slides[swiperAgent.activeIndex],t=document.querySelector("[name='LeadDataModel.ReceiAgentId']");t.value=e.dataset.agentId;var a=e.dataset.agentImage,o=document.querySelector("[data-agent-thank-image]");o&&o.setAttribute("src",a);var n=e.dataset.agentName,i=document.querySelector("[data-agent-thank-name]");i&&(i.innerText=n),UpdateBtn()}),UpdateBtn())}function UpdateBtn(){var e=swiperAgent.slides[swiperAgent.activeIndex],t=document.querySelector("._p-SliderAgentContactForm [data-btn]");+e.dataset.curentLead>+e.dataset.maxLead?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")}function LoadCleave(){for(var e=document.querySelectorAll("[name='LeadDataModel.PhoneNumber']"),t=0;t<e.length;t++){new Cleave(e[t],{numericOnly:!0,delimiters:[" ",".",".","."],prefix:"+84",blocks:[3,3,3,5]})}}function InitControls(){markPlaceAddress=document.getElementById("markPlaceAddress"),frmAdvanceSearch=document.getElementById("frmAdvanceSearch"),rangePriceLabel=document.getElementById("rangePriceLabel"),rangeRoomLabel=document.getElementById("rangeRoomLabel"),rangeSizeLabel=document.getElementById("rangeSizeLabel"),userInput=document.getElementById("UserInput")}function BindingEvent(){markPlaceAddress.addEventListener("keypress",function(e){var t=e.keyCode?e.keyCode:e.which;13===t&&btnSearch.click()}),markPlaceAddress.addEventListener("keyup",function(e){userInput.value=e.target.value})}function InitComboboxSearchType(){var e=document.getElementById("SelectedPropertyGroupType");e.addEventListener("change",function(e){Site.RemoveClass("._p-check-property-type","show"),Site.AddClass("._p-check-property-type","hide");for(var t=e.target.value,a=document.querySelectorAll("._p-check-property-type"),o=0;o<a.length;o++){var n=a[o];if(n.dataset.value===t){Site.RemoveClassElement(n,"hide"),Site.AddClassElement(n,"show");var i=n.dataset.refix;frmAdvanceSearch.action=frmAdvanceSearch.dataset.actionTemplate.replace("REFIX",i).replace("{PAGE}",1)}}}),e.dispatchEvent(new Site.CreateEvent("change"))}function InnitElasticSearch(){var e=LocalStorageHelper.Get(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME);fuzzyComplete=new BcFuzzySearch,fuzzyComplete.Init("#markPlaceAddress",null!=e?e.id:null,null!=e?e.address:"","address","id",LocalStogeEnum.ALL_PLACES,bindingDataCompleteCallBack,bindingDataFailedCallback,selectionCallback,"#frmAdvanceSearch #PlaceId",10,3),e&&(markPlaceAddress.value=e.address)}function bindingDataCompleteCallBack(e,t){}function bindingDataFailedCallback(e,t){Site.NotifyFormFailed("LỖI","Lấy dự liệu thất bại. Vui lòng làm mới lại trang. Hoặc thông báo cho chugn1 tôi biết quá webmaster@baocat.vn")}function selectionCallback(e,t,a){if(console.log(a),t){LocalStorageHelper.Save(LocalStogeEnum.SELECTED_LOCATION_STORAGE_NAME,{id:a,address:t.item.display});var o=SeoUrl.MapSearchUrl(frmAdvanceSearch.dataset.refix,t.item.display,a,1);frmAdvanceSearch.action=o}else frmSubmit.placeId.value=null}function InputSearchInputCallBack(e){}function InitSlider(){var e,t,a=document.getElementById("rangePrice");noUiSlider.create(a,{range:{min:[0],"5%":[2e8,1e8],"70%":[4e9,1e9],"80%":[1e10,2e9],"95%":[2e10,5e9],max:[25e9]},start:[0,25e9],step:1e8,connect:!0,pips:{mode:"count",values:9,density:2,stepped:!0,format:wNumb({decimals:0,edit:function(e){return e=+e,0===e?0:25e9===e?"...":e<1e9?e/1e6+" tr":e/1e9+" tỷ"}})}}),e=a.dataset.min||0,t=a.dataset.max||99999999999999,a.noUiSlider.set([e,t]),a.noUiSlider.on("update",function(e,t){var a,o;frmAdvanceSearch.RangePriceMin.value=null,frmAdvanceSearch.RangePriceMax.value=null,0===+e[0]?a="Dưới ":25e9===+e[0]?a="":+e[0]<1e9?(a=+e[0]/1e6+" triệu",frmAdvanceSearch.RangePriceMin.value=+e[0]):(a=+e[0]/1e9+" tỷ",frmAdvanceSearch.RangePriceMin.value=+e[0]),0===+e[1]?a="":25e9===+e[1]?0===+e[0]?(o="Tất cả",a=""):(o="",a="Trên "+a):+e[1]<1e9?(o=+e[1]/1e6+" triệu",frmAdvanceSearch.RangePriceMax.value=+e[1]):(o=+e[1]/1e9+" tỷ",frmAdvanceSearch.RangePriceMax.value=+e[1]),o===a&&(a=""),""!==a&&""!==o&&0!==+e[0]&&(a+=" - "),rangePriceLabel.innerText=a+o});var o=document.getElementById("rangeRoom");noUiSlider.create(o,{range:{min:[0],"95%":[10,1],max:[11]},start:[0,100],step:1,stepped:!0,connect:!0,pips:{mode:"count",values:12,density:1,stepped:!0,format:wNumb({decimals:0,edit:function(e){return e=+e,0===e?0:11===e?"...":e}})}}),e=o.dataset.min||0,t=o.dataset.max||99999999999999,o.noUiSlider.set([e,t]),o.noUiSlider.on("update",function(e,t){var a,o;frmAdvanceSearch.RangeRoomMin.value=null,frmAdvanceSearch.RangeRoomMax.value=null,0===+e[0]?a="Dưới ":11===+e[0]?a="":(a=+e[0],frmAdvanceSearch.RangeRoomMin.value=+e[0]),0===+e[1]?a="":11===+e[1]?0===+e[0]?(o="Tất cả",a=""):(o="",a="Trên "+a):(o=+e[1],frmAdvanceSearch.RangeRoomMax.value=+e[1]),o===a&&(a=""),""!==a&&""!==o&&0!==+e[0]&&(a+=" - "),rangeRoomLabel.innerText=a+o});var n=document.getElementById("rangeSize");noUiSlider.create(n,{range:{min:[0],"5%":[20,10],"30%":[100,10],"70%":[300,10],"95%":[1e3,10],max:[1010]},start:[0,1e4],step:10,density:1,connect:!0,pips:{mode:"values",values:[30,50,100,150,200,250,300,500,700,900,1010],format:wNumb({decimals:0,edit:function(e){return e=+e,0===e?0:1010===e?"...":e}})}}),e=n.dataset.min||0,t=n.dataset.max||99999999999999,n.noUiSlider.set([e,t]),n.noUiSlider.on("update",function(e,t){var a,o;frmAdvanceSearch.RangeSizeMin.value=null,frmAdvanceSearch.RangeSizeMax.value=null,0===+e[0]?a="Dưới ":1010===+e[0]?a="":(a=+e[0],frmAdvanceSearch.RangeSizeMin.value=Math.round(e[0])),0===+e[1]?a="":1010===+e[1]?0===+e[0]?(o="Tất cả",a=""):(o="",a="Trên "+a+" m<sup class='text-12'>2<sup/>"):(o=+e[1]+" m<sup class='text-12'>2<sup/>",frmAdvanceSearch.RangeSizeMax.value=Math.round(e[1])),o===a&&(a=""),""!==a&&""!==o&&0!==+e[0]&&(a+=" - "),rangeSizeLabel.innerHTML=a+o})}function RefreshListProSaved(e,t){Site.AddClassNameInTime("[data-btn-saved-property]","_blink",1e3);var a=Site.FindParent(e,"_property-item");if(null!=a){var o=new FormData;o.append("PropertyId",a.dataset.propId),console.log(a.dataset.propId);var n;t?(n="//"+document.location.host+"/PublicProperty/SaveProperty",AjaxRequest.SendFormData("POST",n,o,function(e,t){"undefined"!=typeof google&&google&&google.maps&&google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"),savedPropertiesNumber&&(savedPropertiesNumber.innerText=e)},null)):(n="//"+document.location.host+"/PublicProperty/RemoveSavedProperty",AjaxRequest.SendFormData("POST",n,o,function(e,t){"undefined"!=typeof google&&google&&google.maps&&google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"),savedPropertiesNumber&&(savedPropertiesNumber.innerText=e,ReloadSavedForm())},null))}}function ReloadSavedForm(){var e=document.getElementById("formLazyLoaduserHistory"),t=e.querySelector("#btnSubmitUserHistory");t.click()}function RefreshListProViewed(e,t){Site.AddClassNameInTime("[data-btn-viewed-property]","_blink",1e3);var a=Site.FindParent(e,"_property-item");if(null!=a){var o=new FormData;o.append("PropertyId",a.dataset.propId);var n="//"+document.location.host+(t?"/PublicProperty/SaveProperty":"/PublicProperty/RemoveSavedProperty");AjaxRequest.SendFormData("POST",n,o,function(e,t){"undefined"!=typeof google&&google&&google.maps&&google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"),savedPropertiesNumber&&(savedPropertiesNumber.innerText=e),UpdateListSaved()},null)}}function ReloadViewedForm(){var e=document.getElementById("formLazyLoaduserViewed"),t=e.querySelector("#btnSubmitUserViewed");t.click()}function Init(){mainActicle=document.getElementById("mainActicle");var e=document.getElementById("map");mainPropertyLocation={lat:NumberHelper.ToDouble(e.dataset.latitude),lng:NumberHelper.ToDouble(e.dataset.longitude)},mainPropertyId=e.dataset.propertyId,activeProp={PropId:+e.dataset.propertyId},mainPropertyIconUrl=e.dataset.mainPropertyIconUrl;for(var t=document.querySelectorAll("._p-btn-show-on-map"),a=0;a<t.length;a++)t[a].addEventListener("click",function(e){ShowLocationNameOnMap(e.target)});btnSearchAdvance=document.getElementById("btnSearchAdvance"),btnSearchAdvance.addEventListener("click",function(e){document.querySelector("._p-adsence-1").scrollIntoView({behavior:"smooth"}),document.getElementById("showAdvanceSearch").checked=!0,document.getElementById("markPlaceAddress").focus()})}function LoadMap(){var e=new Object;e.elementSelector="#map",e.mapChangeCallBack=MapChangeEndCallback,e.showPropertyWidgetCallback=ShowPropertyWidgetCallback,e.deaultLatLng=mainPropertyLocation,e.mainPropertyId=mainPropertyId,e.mainPropertyIcon={anchor:new google.maps.Point(7.5,24),url:mainPropertyIconUrl},console.log(mainPropertyIconUrl),e.zoomInSelector="#mapControl ._p-zoom-in",e.zoomOutSelector="#mapControl ._p-zoom-out",e.userGeoSelector="#mapControl ._p-user-geo",e.selectMapTypeSelector="#mapControl ._p-list-type",e.selectMapTypeClass="-rounded",e.scrollwheel=!1,e.defaultZoom=15,e.minZoom=12,GMap.Init(e),GMap.LoadMap()}function MapChangeEndCallback(e,t){console.log("MapChange");var a=e.getNorthEast(),o=e.getSouthWest();LoadMapAjax(t,a,o,0)}function ShowPropertyWidgetCallback(){Site.AddClassNameInTime("._p-label-listView","_blink",1e3)}function LoadMapAjax(e,t,a,o){if(!disableLoadingMap){disableLoadingMap=!0,Site.RemoveClassElement(loadingMapAnimation,"hide");var n,i=new FormData;i.append("NeLat",t.lat().ToFrDouble()),i.append("NeLng",t.lng().ToFrDouble()),i.append("SwLat",a.lat().ToFrDouble()),i.append("SwLng",a.lng().ToFrDouble()),e>13?(GMap.SetVisiblePlaceNameMarkers(!0),GMap.ClearMarker(GMap.MetaDataType.LOCALITY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV2),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV1),i=new FormData(window.frmAdvanceSearch),i.append("PageNumber",o),i.append("NeLat",t.lat().ToFrDouble()),i.append("NeLng",t.lng().ToFrDouble()),i.append("SwLat",a.lat().ToFrDouble()),i.append("SwLng",a.lng().ToFrDouble()),n="//"+document.location.host+"/PublicProperty/GetMapPropertyMarkers",AjaxRequest.SendFormData("POST",n,i,LoadPropertyMarkerSucess,LoadMapItemFailed),placeNameLoaded||(placeNameLoaded=!0,i=new FormData,i.append("PageNumber",o),i.append("lat",GMap.Map.getCenter().lat().ToFrDouble()),i.append("lng",GMap.Map.getCenter().lng().ToFrDouble()),n="//"+document.location.host+"/PublicLocationName/GetMapPlaceNameMarkersByDistance",AjaxRequest.SendFormData("POST",n,i,LoadPlaceName,LoadMapItemFailed))):e>11?(GMap.ClearMarker(GMap.MetaDataType.PROPERTY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV2),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV1),GMap.SetVisiblePlaceNameMarkers(!1),alert(e+"Phường"),n="//"+document.location.host+"/PublicPlaces/GetMapLocalityMarkers",AjaxRequest.SendFormData("POST",n,i,LoadLocalityMarkerSucess,LoadMapItemFailed)):e>9?(GMap.ClearMarker(GMap.MetaDataType.PROPERTY),GMap.ClearMarker(GMap.MetaDataType.LOCALITY),GMap.SetVisiblePlaceNameMarkers(!1),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV1),alert(e+"qUận"),n="//"+document.location.host+"/PublicPlaces/GetMapAdminLevel2Markers",AjaxRequest.SendFormData("POST",n,i,LoadAdminLevel2MarkerSucess,LoadMapItemFailed)):(GMap.SetVisiblePlaceNameMarkers(!1),GMap.ClearMarker(GMap.MetaDataType.PROPERTY),GMap.ClearMarker(GMap.MetaDataType.LOCALITY),GMap.ClearMarker(GMap.MetaDataType.ADMIN_LV2),alert(e+"Tỉnh"),n="//"+document.location.host+"/PublicPlaces/GetMapAdminLevel1Markers",AjaxRequest.SendFormData("POST",n,i,LoadAdminLevel1MarkerSucess,LoadMapItemFailed))}}function LoadPlaceName(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},0);var t=JSON.parse(e);GMap.AddPlaceNameMarkers(t)}function LoadPropertyMarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var t=JSON.parse(e);if(GMap.AddPropertyMarker(t),null!=activeProp){var a=GMap.GetMarkerByPropId(activeProp.PropId);a&&google.maps.event.trigger(a,"click"),activeProp=null}if(null!=activePlaceName){google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick");var o=GMap.GetMarkerByPlaceNameId(+activePlaceName.id);o&&google.maps.event.trigger(o,"click"),activePlaceName=null}}function LoadLocalityMarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var t=JSON.parse(e);GMap.AddLocalityMarker(t)}function LoadAdminLevel2MarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var t=JSON.parse(e);GMap.AddAdminLevel2Marker(t)}function LoadAdminLevel1MarkerSucess(e){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100);var t=JSON.parse(e);GMap.AddAdminLevel1Marker(t)}function LoadMapItemFailed(){setTimeout(function(){disableLoadingMap=!1,Site.AddClassElement(loadingMapAnimation,"hide")},100)}function ShowOnMap(e){var t=e.dataset.propId;activeProp={PropId:+t},GMap.Map.getZoom()<14&&GMap.Map.setZoom(15),GMap.Map.panTo({lat:NumberHelper.ToDouble(e.dataset.lat),lng:NumberHelper.ToDouble(e.dataset.lng)}),GMap.Map.panBy(0,162)}function ShowLocationNameOnMap(e){activePlaceName={id:e.dataset.id,lat:e.dataset.lat,lng:e.dataset.lng},GMap.IsLoaded?(GMap.Map.getZoom()<14&&GMap.Map.setZoom(15),GMap.Map.panTo({lat:NumberHelper.ToDouble(activePlaceName.lat),lng:NumberHelper.ToDouble(activePlaceName.lng)}),GMap.Map.panBy(0,70)):"complete"===document.readyState?LoadMap():window.onload=function(){LoadMap()};var t=document.getElementById("p-map");t&&t.scrollIntoView()}!function(e){function t(e,t){for(var a=window,o=(e||"").split(".");a&&o.length;)a=a[o.shift()];return"function"==typeof a?a:(t.push(e),Function.constructor.apply(null,t))}function a(e){return"GET"===e||"POST"===e}function o(e,t){a(t)||e.setRequestHeader("X-HTTP-Method-Override",t)}function n(t,a,o){var n;a&&void 0!==a.isUpdateLayout&&!a.isUpdateLayout||o.indexOf("application/x-javascript")===-1&&(n=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),e(t.getAttribute("data-ajax-update")).each(function(t,o){var i;switch(n){case"BEFORE":i=o.firstChild,e("<div />").html(a).contents().each(function(){o.insertBefore(this,i)});break;case"AFTER":e("<div />").html(a).contents().each(function(){o.appendChild(this)});break;case"REPLACE-WITH":e(o).replaceWith(a);break;default:e(o).html(a)}}))}function i(i,r){var l,s,d,c;l=i.getAttribute("data-ajax-confirm"),l&&!window.confirm(l)||(s=e(i.getAttribute("data-ajax-loading")),c=parseInt(i.getAttribute("data-ajax-loading-duration"),10)||0,e.extend(r,{type:i.getAttribute("data-ajax-method")||void 0,url:i.getAttribute("data-ajax-url")||void 0,cache:!!i.getAttribute("data-ajax-cache"),beforeSend:function(e){var a;return o(e,d),a=t(i.getAttribute("data-ajax-begin"),["xhr"]).apply(i,arguments),a!==!1&&s.show(c),a},complete:function(){s.hide(c),t(i.getAttribute("data-ajax-complete"),["xhr","status"]).apply(i,arguments),console.log("complete")},success:function(e,a,o){n(i,e,o.getResponseHeader("Content-Type")||"text/html"),t(i.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(i,arguments),console.log("success")},error:function(){t(i.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(i,arguments),console.log("error")}}),r.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),d=r.type.toUpperCase(),a(d)||(r.type="POST",r.data.push({name:"X-HTTP-Method-Override",value:d})),e.ajax(r))}function r(t){var a=e(t).data(d);return!a||!a.validate||a.validate()}var l="unobtrusiveAjaxClick",s="unobtrusiveAjaxClickTarget",d="unobtrusiveValidation";e(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),i(this,{url:this.href,type:"GET",data:[]})}),e(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,o=e(t.target),n=e(o.parents("form")[0]),i=o.offset();n.data(l,[{name:a+".x",value:Math.round(t.pageX-i.left)},{name:a+".y",value:Math.round(t.pageY-i.top)}]),setTimeout(function(){n.removeData(l)},0)}),e(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,o=e(t.target),n=e(o.parents("form")[0]);n.data(l,a?[{name:a,value:t.currentTarget.value}]:[]),n.data(s,o),setTimeout(function(){n.removeData(l),n.removeData(s)},0)}),e(document).on("submit","form[data-ajax=true]",function(t){var a=e(this).data(l)||[],o=e(this).data(s),n=o&&o.hasClass("cancel");t.preventDefault(),(n||r(this))&&i(this,{url:this.action,type:this.method||"GET",data:a.concat(e(this).serializeArray())})})}(jQuery);var sellMarker,rentMarker,locationNameIcon='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="29"><path fill="{{COLOR}}" d="M3.5 20.5L12 29l8.5-8.5c4.67-4.68 4.67-12.28 0-16.97-4.7-4.66-12.3-4.66-17 0-4.67 4.7-4.67 12.3 0 17z"/><circle cx="12" cy="12.02" r="9.96" fill="#e6e6e6"/><text x="11.61" y="15.97" fill="{{COLOR}}" style="font-family: Movoto, sans-serif !important;" text-anchor="middle"><tspan font-weight="bold" font-size="10.67">{{LABEL}}</tspan></text></svg>',markerColor=["blue","red","sky","green","red","orange","blue","green","yellow"],markerActiveColor=["darkblue","darkred","darkturquoise","darkgreen","darkred","darkorange","darkblue","darkgreen","darkgoldenrod"],labelMarker="red",labelMarkerActive="firebrick",labelMarkerZero="darkgray",labelMarkerZeroActive="#808080",activeColorPlaceName="#F44336",GMap={_Extend:function(e){GMap.elementSelector=e.elementSelector,GMap.mapChangeCallBack=e.mapChangeCallBack,GMap.showPropertyWidgetCallback=e.showPropertyWidgetCallback,GMap.InfoBoxShowCallBack=e.infoBoxShowCallBack||function(){},GMap.deaultLatLng=e.deaultLatLng,GMap.mainPropertyId=e.mainPropertyId,GMap.mainPropertyIcon=e.mainPropertyIcon,GMap.scrollwheel=e.scrollwheel,GMap.defaultZoom=e.defaultZoom,GMap.RefreshCount=0,GMap.minZoom=e.minZoom||5,GMap.DocIds=[],GMap.PlaceNameIds=[],GMap.Markers=[],GMap.PlaceNameMarkers=[],GMap.IsLoading=!0,GMap.IsLoaded=!1,GMap.MetaDataType={PROPERTY:0,LOCALITY:1,ADMIN_LV2:2,ADMIN_LV1:3,PLACE_NEARBY:4};var t={content:"",disableAutoPan:!1,maxWidth:288,alignBottom:!1,pixelOffset:new google.maps.Size(29,(-29)),zIndex:null,boxStyle:{opacity:1,zIndex:999,width:"288px"},closeBoxMargin:"5px 5px",closeBoxURL:"data:image/gif;base64,R0lGODlhDgANAIAAAP///6CgpCH5BAAAAAAALAAAAAAOAA0AAAIfjI8Jy73mIoAzNErrs/se72Qdg4BjhnGnKo3tlsRGAQA7",infoBoxClearance:new google.maps.Size(1,1)};GMap.InfoBoxMouseOver=new InfoBox(t),GMap.InfoBoxPlaceNameMouseOver=new InfoBox(t),GMap.InfoBoxMouseOver.addListener("closeclick",function(){if(GMap.ActiveMarker){var e=GMap.ActiveMarker;GMap.ActiveMarker=null,e&&google.maps.event.trigger(e,"mouseout")}GMap.InfoBoxMouseOver.close()}),GMap.InfoBoxMouseClick=new InfoBox(t),GMap.InfoBoxMouseClick.addListener("closeclick",function(){if(GMap.ActiveMarker){var e=GMap.ActiveMarker;GMap.ActiveMarker=null,e&&google.maps.event.trigger(e,"mouseout")}GMap.InfoBoxMouseClick.close()}),GMap.InfoBoxPlaceNameMouseClick=new InfoBox(t),GMap.InfoBoxPlaceNameMouseClick.addListener("closeclick",function(){if(GMap.ActivePlaceNameMarker){var e=GMap.ActivePlaceNameMarker;GMap.ActivePlaceNameMarker=null,e&&google.maps.event.trigger(e,"mouseout")}GMap.InfoBoxPlaceNameMouseClick.close()});var a=document.querySelector(GMap.elementSelector);GMap.Map=new google.maps.Map(a,{center:GMap.deaultLatLng||new google.maps.LatLng(10.823099,106.629664),zoom:GMap.defaultZoom,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,zoomControl:!1,panControl:!1,scaleControl:!1,streetViewControl:!0,scrollwheel:GMap.scrollwheel,gestureHandling:"greedy",minZoom:GMap.minZoom}),GMap.GmapControl=GmapControl.Init(GMap,e.userGeoSelector,e.zoomInSelector,e.zoomOutSelector,e.selectMapTypeSelector,e.selectMapTypeClass)},LoadMap:function(){GMap.IsLoading=!0,GMap.Map.addListener("idle",function(){GMap.IsLoaded=!0,GMap.IsLoading=!1,GMap.RefreshCount++,GMap.mapChangeCallBack&&GMap.mapChangeCallBack(GMap.Map.getBounds(),GMap.Map.getZoom());
}),GMap.Map.addListener("zoom_changed",function(){})},ClearMarker:function(e){if(!(GMap.Markers.length>0&&GMap.Markers[0].metaDataType!==e)){null!=GMap.ActiveMarker&&GMap.ActiveMarker.metaDataType===e&&(google.maps.event.trigger(GMap.InfoBoxMouseOver,"closeclick"),google.maps.event.trigger(GMap.InfoBoxMouseClick,"closeclick"));for(var t=0;t<GMap.Markers.length;t++)GMap.Markers[t].setMap(null);if(GMap.Markers=[],GMap.DocIds=[],e===GMap.MetaDataType.PLACE_NEARBY)for(var a=0;a<GMap.PlaceNameMarkers.length;a++)GMap.Markers[a].setVisible(!1)}},SetVisiblePlaceNameMarkers:function(e){e||(google.maps.event.trigger(GMap.InfoBoxPlaceNameMouseOver,"closeclick"),google.maps.event.trigger(GMap.InfoBoxPlaceNameMouseClick,"closeclick"));for(var t=0;t<GMap.PlaceNameMarkers.length;t++)GMap.PlaceNameMarkers[t].setVisible(e)},AddSpecialMarker:function(e,t,a,o,n,i){var r={anchor:new google.maps.Point(o,n),url:e},l=new google.maps.Marker({position:{lat:t,lng:a},draggable:!1,optimized:!1,icon:r,zIndex:i,animation:google.maps.Animation.DROP});return l.setMap(GMap.Map),l},AddPropertyMarker:function(e){for(var t=0;t<e.length;t++)if(GMap.DocIds.indexOf(e[t].id)<0){GMap.DocIds.push(e[t].id);var a=GMap._DrawPropertyMarker(e[t]);GMap.Markers.push(a),GMap._BindingPropertyEventMarker(a)}},AddPlaceNameMarkers:function(e){for(var t=0;t<e.length;t++)if(GMap.PlaceNameIds.indexOf(e[t].id)<0){GMap.PlaceNameIds.push(e[t].id);var a=GMap._DrawPlaceMarker(e[t]);GMap.PlaceNameMarkers.push(a),GMap._BindingPlaceNameEventMarker(a)}},AddLocalityMarker:function(e){for(var t=e.length,a=0;a<t;a++)if(GMap.DocIds.indexOf(e[a].id)<0){GMap.DocIds.push(e[a].id);var o=GMap._DrawLocalityMarker(e[a],a+10*e[a].propertiesCount*t);GMap.Markers.push(o),GMap._BindingLabelEventMarker(o)}},AddAdminLevel2Marker:function(e){for(var t=e.length,a=0;a<t;a++)if(GMap.DocIds.indexOf(e[a].id)<0){GMap.DocIds.push(e[a].id);var o=GMap._DrawAdminLevel2Marker(e[a],a+e[a].propertiesCount*t);GMap.Markers.push(o),GMap._BindingLabelEventMarker(o)}},AddAdminLevel1Marker:function(e){for(var t=e.length,a=0;a<t;a++)if(GMap.DocIds.indexOf(e[a].id)<0){GMap.DocIds.push(e[a].id);var o=GMap._DrawAdminLevel1Marker(e[a],a+10*e[a].propertiesCount*t);GMap.Markers.push(o),GMap._BindingLabelEventMarker(o)}},GetMarkerByPropId:function(e){for(var t=0;t<GMap.Markers.length;t++){if(GMap.Markers[t].metaDataType!==GMap.MetaDataType.PROPERTY)return null;var a=GMap.Markers[t].metaData;if(a.id===e)return GMap.Markers[t]}return null},GetMarkerByPlaceNameId:function(e){for(var t=0;t<GMap.PlaceNameMarkers.length;t++){if(GMap.PlaceNameMarkers[t].metaDataType!==GMap.MetaDataType.PLACE_NEARBY)return null;var a=GMap.PlaceNameMarkers[t].metaData;if(a.id===e)return GMap.PlaceNameMarkers[t]}return null},_DrawPlaceMarker:function(e){var t=GMap._ConvertDocPlaceNameMarker(e);return t.setMap(GMap.Map),t},_DrawPropertyMarker:function(e){var t=GMap._ConvertDocPropToPropertyMarker(e);return t.setMap(GMap.Map),t},_DrawLocalityMarker:function(e,t){var a=GMap._ConvertObjectToLabelMarker(e,t,GMap.MetaDataType.LOCALITY);return a.setMap(GMap.Map),a},_DrawAdminLevel2Marker:function(e,t){var a=GMap._ConvertObjectToLabelMarker(e,t,GMap.MetaDataType.ADMIN_LV2);return a.setMap(GMap.Map),a},_DrawAdminLevel1Marker:function(e,t){var a=GMap._ConvertObjectToLabelMarker(e,t,GMap.MetaDataType.ADMIN_LV1);return a.setMap(GMap.Map),a},_ConvertDocPropToPropertyMarker:function(e){var t;return e.id===+GMap.mainPropertyId?t=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,optimized:!1,icon:GMap.mainPropertyIcon,zIndex:10*e.id,animation:google.maps.Animation.DROP,metaData:e,metaDataType:GMap.MetaDataType.PROPERTY}):(t=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,zIndex:e.id,animation:google.maps.Animation.DROP,label:{color:"white",fontSize:"12px",fontWeight:"700",text:e.price.ToMoney()},icon:{path:"M45.5,0h-43C1.1,0,0,1.1,0,2.5v12C0,15.9,1.1,17,2.5,17h19.1l3.3,4l3.3-3.9l17.2,0c1.4,0,2.5-1.1,2.5-2.5V2.5 C48,1.1,46.9,0,45.5,0z",fillColor:markerColor[e.propertyType],fillOpacity:1,anchor:new google.maps.Point(24,21),strokeWeight:0,scale:1,labelOrigin:new google.maps.Point(24,9),position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude}},metaData:e,metaDataType:GMap.MetaDataType.PROPERTY}),e.propertyType<=3||e.propertyType<=8||e.propertyType<=12),t},_ConvertDocPlaceNameMarker:function(e){var t={anchor:new google.maps.Point(12,29),url:"data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}","#696969").replace("{{COLOR}}","#696969").replace("{{LABEL}}",e.labelName?e.labelName:"?")},a=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,optimized:!1,icon:t,zIndex:1,metaData:e,animation:google.maps.Animation.DROP,metaDataType:GMap.MetaDataType.PLACE_NEARBY});return a.setMap(GMap.Map),a},_ConvertObjectToLabelMarker:function(e,t,a){var o='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="32"><path fill="#b27214" d="M21.3.2h2V32h-2z"/><path fill="#995c0d" d="M20 .2V32h1.6V20h1.7v-2.4h-1.7V.2z"/><path fill="{{background}}" stroke="#fff" stroke-width="5.5" d="M39.5 260L0 210l39.5-50.3h214.7V260H182z" transform="matrix(.15358 0 0 .13873 .538 -17.76)"/></svg>',n={anchor:new google.maps.Point(21.3,32),labelOrigin:new google.maps.Point(21.3,12),url:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o.replace("{{background}}",0===e.propertiesCount?labelMarkerZero:labelMarker))},i=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,icon:n,label:{color:"white",fontSize:"11px",fontWeight:"700",text:0===e.propertiesCount?"SALE":WNumbHelper.GetFrNumber(e.propertiesCount)},zIndex:t,animation:google.maps.Animation.DROP,metaData:e,metaDataType:a});return i},_ConvertObjectToAdminLevel2Marker:function(e,t){var a={anchor:new google.maps.Point(12,24),url:0===e.curentPropertiesCount?"/images/shared/map/LocalityMarker0.png":"/images/shared/map/LocalityMarker.png"},o=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,icon:a,zIndex:t,animation:google.maps.Animation.DROP,metaData:e,metaDataType:GMap.MetaDataType.ADMIN_LV2});return o},_ConvertObjectToAdminLevel1Marker:function(e,t){var a={anchor:new google.maps.Point(12,24),url:0===e.curentPropertiesCount?"/images/shared/map/LocalityMarker0.png":"/images/shared/map/LocalityMarker.png"},o=new google.maps.Marker({position:{lat:e.geoLoc.latitude,lng:e.geoLoc.longitude},draggable:!1,icon:a,zIndex:t,animation:google.maps.Animation.DROP,metaData:e,metaDataType:GMap.MetaDataType.ADMIN_LV1});return o},_GetHoverContent:function(e,t){var a,o;if(t===GMap.MetaDataType.PLACE_NEARBY){o=document.createElement("div");var n='<div id="infobox0" class="hover"> <div> <h4 class="text-strong text-14 _text-ellipsis _p-text-header text-white text-uppercase fill-info">'+e.title+'</h4> </div><div class="cf _p-div1"> <div class="text-16 padding-right-5 _rating"> <b>'+e.locationName+'</b> <div class="star-rating padding-v-5"> <div class="star-rating__wrap"> <label class="star-rating__ico fa fa-star-o fa-lg" data-checked5 data-rate="5" title="5/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg" data-checked4 data-rate="4" title="4/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg" data-checked3 data-rate="3" title="3/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg"  data-checked2 data-rate="2" title="2/5 stars"></label> <label class="star-rating__ico fa fa-star-o fa-lg"  data-checked1 data-rate="1" title="1/5 stars"></label> </div></div></div><p class="_text-ellipsis">'+e.simpleAddress+"</p></div></div>",i=Math.round(NumberHelper.ToDouble(e.rating));return n=n.replace("data-checked"+i,"data-check"),o.innerHTML=n,o}var r;if(t===GMap.MetaDataType.PROPERTY){a=markerColor[e.propertyType];var l=e.propertyTypeName;r=e.simpleAddress;var s=e.landSize?"Diện tích: <b>"+WNumbHelper.GetSizem(e.landSize)+"</b>":"Diện tích: NaN",d=e.room?e.room+" phòng":"",c=e.bath?e.bath+" phòng tắm":"",p=e.bed?e.bed+" phòng ngủ":"",u=WNumbHelper.GetPrice(e.price,!1),m=WNumbHelper.GetPricePerm(e.price,e.landSize),g=m?"<span class='label border red text-lowercase'>"+m+"</span>":"",M=[s,d,p,c].JoinNotNull(", ");return o=document.createElement("div"),o.innerHTML="<div id='infobox"+t+"' class='hover'><h4 class='text-strong text-14 _text-ellipsis _p-text-header text-white text-uppercase' style='background-color:"+a+"'>"+l+"</h4><div class='cf _p-div1'><b class='_color-text-blue text-14 text-strong padding-right-5'> "+u+"</b>"+g+"<p class='_text-ellipsis'>"+r+"</p></div><div class='cf _p-hover-footer'><p class='_text-ellipsis'>"+M+"</p></div></div>",o}a=e.propertiesCount?labelMarkerActive:labelMarkerZeroActive;var h=e.placeName;r=e.simpleAddress;var v=e.propertiesCount?"<b>"+e.propertiesCount.ToFrDouble()+"</b>":"<span class='text-gray'>NaN</span>",f=e.avgPriceLvMonth&&0!==e.avgPriceLvMonth?"<b>"+WNumbHelper.GetPrice(e.avgPriceLvMonth,!0)+"/m<sup>2</sup></b>":"<span class='text-gray'>NaN</span>",y=e.minPrice&&0!==e.minPrice?"<b>"+WNumbHelper.GetPrice(e.minPrice,!1)+"</b>":"<span class='text-gray'>NaN</span>",x=e.curentPropertiesCount?"<b>"+e.curentPropertiesCount.ToFrDouble()+"</b>":"<span class='text-gray'>NaN</span>",b=e.avgPrice&&0!==e.avgPrice?"<b>"+WNumbHelper.GetPrice(e.avgPrice,!0)+"/m<sup>2</sup></b>":"<span class='text-gray'>NaN</span>",L=e.maxPrice&&0!==e.maxPrice?"<b>"+WNumbHelper.GetPrice(e.maxPrice,!1)+"/m<sup>2</sup></b>":"<span class='text-gray'>NaN</span>",I=SeoUrl.PlaceDetailUrl("ban-dia-oc",e.simpleAddress,e.id),k=SeoUrl.MapSearchUrl("ban-dia-oc",e.simpleAddress,e.id);return o=document.createElement("div"),o.innerHTML="<div id='infobox"+t+"' class='hover'><h4 class='text-strong text-center text-14 _text-ellipsis _p-text-header text-white text-uppercase' style='background-color:"+a+"'>"+h+"</h4> <div class='cf _p-div1 row'> <b class='_color-text-blue block text-14 text-strong padding-right-5 _text-ellipsis'>"+r+"</b> <div class='row tablet-col-2 padding-v-5'> <div class='col-6'> <ul class='circle pull-left'> <li>Số địa ốc: "+v+"</li><li>Giá TB<sup class='_require hidden _max-width-0'>*</sup>: "+f+"</li><li>Min<sup class='_require'>*</sup>: "+y+"</li></ul></div><div class='col-6'><ul class='circle pull-left'> <li>Số địa ốc<sup class='_require'>*</sup>: "+x+"</li><li>Giá TB<sup class='_require'>*</sup>: "+b+"</li><li>Max<sup class='_require'>*</sup>: "+L+"</li></ul></div><div class='col-12'> <small><sup class='_require'>*</sup>: Tính trong tháng hiện tại</small> </div></div></div><div class='cf fill-light-silver padding-5'> <a class='btn s info' href='"+I+"'>Xem phân tích</a> <a class='btn s warning' href='"+k+"'>Xem danh sách địa ốc</a></div></div>",o},_GetClickContent:function(e,t){if(t===GMap.MetaDataType.PROPERTY){var a=this,o=new FormData;o.append("PropertyId",e.id),o.append("mapSearchListType","Widget");var n="//"+document.location.host+"/PublicProperty/GetPropertyWidget";AjaxRequest.SendFormData("POST",n,o,function(e){var t=Site.HtmlToElement(e);if(null!=t[0]&&t[0].dataset.propId){var o=document.getElementById("infoboxPropertyActive"+t[0].dataset.propId);o&&(o.innerHTML=e,Site&&(Site.BeLazyRevalidate(),Site.MomentTime(),a.InfoBoxShowCallBack(+t[0].dataset.propId)))}},function(e){Site.Notify("LỖI","Lấy thông tin địa ốc thất bại"+e,"error")});var i=document.createElement("div");return i.innerHTML="<div class='_p-PropertyWidgetMapSearch active cf' id='infobox"+t+"'><div id='infoboxPropertyActive"+e.id+"' class='_p-facebook-loading'><div class='relative _property-item border-1 border-silver solid cf center'><div class='_p-ani _p-pic'></div><div class='padding cf'><div class='_p-sec2-row1'></div><div class='_p-sec2-row2'></div><div class='_p-sec2-row3'></div></div><div class='row padding-v border border-top border-1 solid cf'><div class='padding-left col-4 mobile-col-persist'><div class='_p-sec3-row1'></div><div class='_p-sec3-row2'></div><div class='_p-sec3-row3'></div><div class='_p-sec3-row4'></div></div><div class='col-8 _p-widget-button mobile-col-persist'><div class='row'><div class='col-7 _text-sm mobile-col-persist'><div class='_p-sec3-row5'></div><div class='_p-sec3-row6'></div></div><div class='col-5 mobile-col-persist pull-right padding-right'><div class='_p-sec3-row7'></div></div></div><div class='row _p-btn-group text-right'> <span class='btn s _p-sec3-row8'></span> <span class='btn s _p-sec3-row9'></span></div></div></div></div></div></div>",i}return"<p class='danger'>NOT FOUND CONTENT</p>"},_BindingPlaceNameEventMarker:function(e){e.addListener("mouseover",function(){if(null==GMap.ActivePlaceNameMarker||GMap.ActivePlaceNameMarker!==this){this.setZIndex(this.getZIndex()+1e5);var e=this.getIcon();e.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}",activeColorPlaceName).replace("{{COLOR}}",activeColorPlaceName).replace("{{LABEL}}",this.metaData.labelName?this.metaData.labelName:"?"),this.setIcon(e),GMap.InfoBoxPlaceNameMouseOver.close(),GMap.InfoBoxPlaceNameMouseOver.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxPlaceNameMouseOver.open(GMap.Map,this)}}),e.addListener("mouseout",function(){if(null==GMap.ActivePlaceNameMarker||GMap.ActivePlaceNameMarker!==this){this.setZIndex(this.getZIndex()-1e5);var e=this.getIcon();e.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}","#696969").replace("{{COLOR}}","#696969").replace("{{LABEL}}",this.metaData.labelName?this.metaData.labelName:"?"),this.setIcon(e),GMap.InfoBoxPlaceNameMouseOver.close()}}),e.addListener("click",function(){if(null==GMap.ActivePlaceNameMarker||GMap.ActivePlaceNameMarker!==this){if(GMap.InfoBoxPlaceNameMouseOver.close(),null!=GMap.ActivePlaceNameMarker){GMap.ActivePlaceNameMarker.setZIndex(GMap.ActivePlaceNameMarker.getZIndex()-1e5);var e=GMap.ActivePlaceNameMarker.getIcon();e.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}","#696969").replace("{{COLOR}}","#696969").replace("{{LABEL}}",GMap.ActivePlaceNameMarker.metaData.labelName?GMap.ActivePlaceNameMarker.metaData.labelName:"?"),GMap.ActivePlaceNameMarker.setIcon(e)}GMap.ActivePlaceNameMarker=this,this.setZIndex(this.getZIndex()+1e5);var t=this.getIcon();t.url="data:image/svg+xml;charset=utf-8,"+locationNameIcon.replace("{{COLOR}}",activeColorPlaceName).replace("{{COLOR}}",activeColorPlaceName).replace("{{LABEL}}",this.metaData.labelName?this.metaData.labelName:"?"),this.setIcon(t),GMap.InfoBoxPlaceNameMouseClick.close(),GMap.InfoBoxPlaceNameMouseClick.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxPlaceNameMouseClick.open(GMap.Map,this)}})},_BindingPropertyEventMarker:function(e){e.addListener("mouseover",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){this.setZIndex(this.getZIndex()+1e5);var e=this.icon;e.fillColor=markerActiveColor[this.metaData.propertyType],this.setIcon(e),GMap.InfoBoxMouseOver.close(),GMap.InfoBoxMouseOver.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseOver.open(GMap.Map,this)}}),e.addListener("mouseout",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){this.setZIndex(this.getZIndex()-1e5);var e=this.icon;e.fillColor=markerColor[this.metaData.propertyType],this.setIcon(e),GMap.InfoBoxMouseOver.close()}}),e.addListener("click",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){if(GMap.InfoBoxMouseOver.close(),null!=GMap.ActiveMarker){GMap.ActiveMarker.setZIndex(GMap.ActiveMarker.getZIndex()-1e5);var e=GMap.ActiveMarker.icon;e.fillColor=markerColor[GMap.ActiveMarker.metaData.propertyType],GMap.ActiveMarker.setIcon(e)}this.setZIndex(this.getZIndex()+1e5);var t=this.icon;t.fillColor=markerActiveColor[this.metaData.propertyType],this.setIcon(t),GMap.ActiveMarker=this,GMap.InfoBoxMouseClick.setContent(GMap._GetClickContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseClick.close(),GMap.InfoBoxMouseClick.open(GMap.Map,this),CookieHelper.ViewPropertyId(this.metaData.id),GMap.showPropertyWidgetCallback&&"function"==typeof GMap.showPropertyWidgetCallback&&GMap.showPropertyWidgetCallback(this.metaData.id)}})},_BindingLabelEventMarker:function(e){e.addListener("mouseover",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){var e=GMap.ActiveMarker;GMap.ActiveMarker=null,e&&google.maps.event.trigger(e,"mouseout"),this.setZIndex(this.getZIndex()+1e5);var t=this.icon;t.url=t.url.replace(encodeURIComponent(labelMarker),encodeURIComponent(labelMarkerActive)).replace(encodeURIComponent(labelMarkerZero),encodeURIComponent(labelMarkerZeroActive)),this.setIcon(t),GMap.InfoBoxMouseOver.close(),GMap.InfoBoxMouseOver.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseOver.open(GMap.Map,this)}}),e.addListener("mouseout",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){this.setZIndex(this.getZIndex()-1e5);var e=this.icon;e.url=e.url.replace(encodeURIComponent(labelMarkerActive),encodeURIComponent(labelMarker)).replace(encodeURIComponent(labelMarkerZeroActive),encodeURIComponent(labelMarkerZero)),this.setIcon(e),GMap.InfoBoxMouseOver.close()}}),e.addListener("click",function(){if(null==GMap.ActiveMarker||GMap.ActiveMarker!==this){if(GMap.InfoBoxMouseOver.close(),null!=GMap.ActiveMarker){GMap.ActiveMarker.setZIndex(GMap.ActiveMarker.getZIndex()-1e5);var e=this.icon;e.url=e.url.replace(encodeURIComponent(labelMarker),encodeURIComponent(labelMarkerActive)).replace(encodeURIComponent(labelMarkerZero),encodeURIComponent(labelMarkerZeroActive)),this.setIcon(e)}this.setZIndex(this.getZIndex()+1e5);var t=this.icon;t.url=t.url.replace(encodeURIComponent(labelMarker),encodeURIComponent(labelMarkerActive)).replace(encodeURIComponent(labelMarkerZero),encodeURIComponent(labelMarkerZeroActive)),this.setIcon(t),GMap.ActiveMarker=this,GMap.InfoBoxMouseClick.setContent(GMap._GetHoverContent(this.metaData,this.metaDataType)),GMap.InfoBoxMouseClick.close(),GMap.InfoBoxMouseClick.open(GMap.Map,this)}})},Init:function(e){LoadInfoBoxPrototype(),GMap._Extend(e),sellMarker={path:"M45.5,0h-43C1.1,0,0,1.1,0,2.5v12C0,15.9,1.1,17,2.5,17h19.1l3.3,4l3.3-3.9l17.2,0c1.4,0,2.5-1.1,2.5-2.5V2.5 C48,1.1,46.9,0,45.5,0z",fillColor:"#FF0000",fillOpacity:.9,anchor:new google.maps.Point(0,0),strokeWeight:0,label:{color:"",fontFamily:"",fontSize:"",fontWeight:"",text:""},scale:1,zIndex:-20,position:new google.maps.LatLng((-34),151)},rentMarker={path:"M56.525,24.533c0-13.548-10.982-24.528-24.529-24.528c-13.356,0-24.2,10.683-24.501,23.968  c-0.009-0.004-0.02-0.004-0.028-0.004c-0.006,0.12,0.013,0.241,0.01,0.362c-0.001,0.067-0.01,0.135-0.01,0.202  c0,0.244,0.03,0.479,0.037,0.72C7.78,41.191,25.795,58.009,31.996,63.995c17.415-14.119,22.485-27.216,23.95-34.199  c0.053-0.245,0.1-0.489,0.145-0.734c0.141-0.752,0.239-1.426,0.307-2.004c0-0.007,0.002-0.014,0.002-0.021  C56.583,25.423,56.525,24.533,56.525,24.533z",fillColor:"#FF0000",fillOpacity:.8,anchor:new google.maps.Point(0,0),strokeWeight:0,label:{color:"",fontFamily:"",fontSize:"",fontWeight:"",text:""},scale:1,zIndex:-20,position:new google.maps.LatLng((-34),151)}}},GmapControl={_Extend:function(e,t,a,o,n,i){GmapControl.MapStyle={ROADMAP:google.maps.MapTypeId.ROADMAP,TERRAIN:google.maps.MapTypeId.TERRAIN,SATELLITE:google.maps.MapTypeId.SATELLITE},GmapControl.ZoomInEle=document.querySelector(a),GmapControl.ZoomOutEle=document.querySelector(o),GmapControl.UserGeo=document.querySelector(t),GmapControl.GMap=e,GmapControl.UserGeoMarker=null;var r=document.createElement("select");r.className=i;var l=document.createElement("option"),s=document.createElement("option"),d=document.createElement("option");l.text="BẢN ĐỒ",l.value=google.maps.MapTypeId.ROADMAP,l.selected=!0,s.text="ĐỊA LÝ",s.value=google.maps.MapTypeId.TERRAIN,d.text="VỆ TINH",d.value=google.maps.MapTypeId.HYBRID,r.add(l),r.add(s),r.add(d);var c=document.querySelector(n);c&&(c.appendChild(r),GmapControl.SelectMapType=r),google.maps.event.addDomListener(GmapControl.UserGeo,"click",function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){GmapControl.GMap.Map.panTo({lat:e.coords.latitude,lng:e.coords.longitude}),GmapControl.UserGeoMarker&&GmapControl.UserGeoMarker.setMap(null),GmapControl.UserGeoMarker=GmapControl.GMap.AddSpecialMarker("/images/shared/map/userSvg.svg",e.coords.latitude,e.coords.longitude,22,50,99999999999)}):alert("Không thể lấy vị trí hiện tại của bạn")}),google.maps.event.addDomListener(GmapControl.ZoomInEle,"click",function(){GmapControl.GMap.Map.setZoom(GmapControl.GMap.Map.getZoom()+1)}),google.maps.event.addDomListener(GmapControl.ZoomOutEle,"click",function(){GmapControl.GMap.Map.setZoom(GmapControl.GMap.Map.getZoom()-1)}),google.maps.event.addDomListener(GmapControl.SelectMapType,"change",function(e){GmapControl.GMap.Map.setMapTypeId(e.currentTarget.value)})},Init:function(e,t,a,o,n,i){return null!=e?(GmapControl._Extend(e,t,a,o,n,i),GmapControl):null}},galleryThumbs,galleryTop;document.addEventListener("DOMContentLoaded",function(e){LoadSwiperDefault()});var swiperAgent=null;document.addEventListener("DOMContentLoaded",function(){}),document.addEventListener("DOMContentLoaded",function(){Site.MomentTime()});var markPlaceAddress,frmAdvanceSearch,rangePriceLabel,rangeRoomLabel,rangeSizeLabel,userInput,fuzzyComplete;document.addEventListener("DOMContentLoaded",function(){InitControls(),InitSlider(),InitComboboxSearchType(),InnitElasticSearch(),BindingEvent()});var showSavedProperty=document.querySelector("[data-target-model='#savedModel']"),showViewedProperty=document.querySelector("[data-target-model='#viewedModel']"),savedPropertiesNumber=document.getElementById("savedPropertiesNumber"),viewedPropertiesNumber=document.getElementById("viewedPropertiesNumber");document.addEventListener("DOMContentLoaded",function(){showSavedProperty.addEventListener("click",ReloadSavedForm),showViewedProperty.addEventListener("click",ReloadViewedForm)});var disableLoadingMap=!1,loadingMapAnimation=document.querySelector("._p-loading"),activeProp=null,activePlaceName=null,mainPropertyLocation=null,btnSearchAdvance=null,mainActicle,mainPropertyId=null,mainPropertyIconUrl=null,placeNameLoaded=!1;document.addEventListener("DOMContentLoaded",function(){Init(),Site.MomentTime(),CookieHelper.ViewPropertyId(mainActicle.dataset.propertyId);var e=document.getElementsByTagName("head")[0],t=e.insertBefore;e.insertBefore=function(a,o){(!a.href||0!==a.href.indexOf("https://fonts.googleapis.com")&&0!==a.href.indexOf("http://fonts.googleapis.com"))&&t.call(e,a,o)}}),window.onscroll=function(){var e=document.getElementById("sidebar"),t=document.documentElement.scrollTop||document.body.scrollTop,a=246;if(t<a){e.style.position="absolute",e.style.top="-63px",Site.RemoveClass("#sidebar ul li","active");var o=e.querySelector("#sidebar ul li");o.classList.add("active")}else{e.style.position="fixed",e.style.top="0";var n=document.querySelectorAll("._p-session");Site.RemoveClass("#sidebar ul li","active");for(var i=0;i<n.length;i++){var r=n[i];if(r.offsetTop+a+r.clientHeight-100>t||r.offsetTop+a>t){var l=e.querySelector("a[href='#"+r.id+"']");return l.parentNode.classList.add("active"),void(GMap.IsLoaded||GMap.IsLoading||"p-map"!==r.id&&"p-chart"!==r.id||("complete"===document.readyState?LoadMap():window.onload=function(){LoadMap()}))}}}};